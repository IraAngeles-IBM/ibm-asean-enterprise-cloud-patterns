{"version":3,"sources":["webpack:///./src/pages/iac-resources/services/index.mdx"],"names":["_frontmatter","makeShortcode","name","props","console","warn","PageDescription","AnchorLinks","AnchorLink","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","small","isMDXComponent"],"mappings":"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","file":"component---src-pages-iac-resources-services-index-mdx-65e6d2a1cd3426fd4fea.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/isaias/Documents/Projects/Developer_Advocate_Group/CODE_PATTERNS/ibm-asean-enterprise-cloud-patterns/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst PageDescription = makeShortcode(\"PageDescription\");\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    {\n      /*\n      The pattern to document the resources is like follow:\n      - Introduce the resource with an example\n      - List all or the most important input parameters\n      - If will be used, list the most important output parameters\n      - Provide instructions to get the value of the input parameters, either using `ibmcloud`, API or the Web console.\n      - If needed, instructions to execute the code either with Terraform or Schematics\n      */\n    }\n    <PageDescription mdxType=\"PageDescription\">\n      <p>{`Use IaC to work with managed Cloud Databases and Service Instances`}</p>\n    </PageDescription>\n    <p>{`Most of the applications requires a database or service. This page explains how to use the `}<inlineCode parentName=\"p\">{`ibm_database`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`ibm_resource_instance`}</inlineCode>{` resources to create different type of databases or services. We will use the API movies demo application to demonstrate the use of a provisioned MongoDB database. The following diagram shows the architecture we will build in this page.`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"762px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"117.01388888888889%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAAsSAAALEgHS3X78AAAEGElEQVQ4y41Vy24jRRT1Z/ERsEAgsUBivoEVC4TEjiUbCAh2QHiMeGjEjEKUkMFJJiQhZsYZJvHbbaffXV397rZjTw6nKnbGEbPA8tGtvn196ta955ZrW9vb2NrawtHREfb393F8fKyf9/b20G63sbu7i23GHBwc6PXh4SGazSYajQY2Nzdh2zbU5+rqStuaaZro9/sanU4HhmEgiiTyPEdZFkSJNE2RZdktLP1VVWE+n2M2m2nUPM+DEEJDSgkRBDpQES5/vFznC6z6VWySJDeofffTfYRRAhFGqCZTzJ9f4ZI7TS9nN/YWZitYxFzO5je2tnE6Rr0nUFRTTC7nmMyuMb2xz8Gvhlrffnd7XSlCmZXwZYxMpZ8x/TThMa6R8TmUIes6xGg8YklC7Vu+X41NedyKGddmU2C3vYP6s20UWY4kixCnEaJU2ZhgXWVA4gAykfTHJCKyWMeqtfILKUjIDLNiAjOwMPJcjPwUA8KL2YS8YHAOO0wxDDJchBlkWmi/iDMYi1g3yrlpxj4sCJNctT/GveYFnoxtuL4P0w0RM9uuI/Hj4yEc4ePCCWCJWMvl1+YYfw1NuFSE6UmSJi8I07xiyiG6psTa1zYe1i2IKCUJtVdkeLAn8MVXY4xHQvtUNoab4FPG7jy8IFEKmxutZFgxG4lWP8Brb59h7csujMDE0BKURYmP1/p4/Z0zPO7Z6NiOLsOgZeHVt07xyTcWjMTF2KOG43CRYVExoxB2INHphTjt9PH9H+v4p/sUJY/S75joDEJsnGzh/qN7SGPW+ILkXcFNBlh/dBeng3Pd8XI6e0HoCtbC9mAODLR6PZijERIRwbE8eN0+s2pxNNuIfAE/jOE6jO0P0O7xRJxnGUtU05UMXQapAjskdWgDXyIWISybzbBcOGyKawvEnCjfC2E64XUsVeDK1aYoQmrMjivY7X3I9Tfgnu/Ci1hbitUSHMsH70H89j7MkBKJEw5CwRjGfvsmnFYddjKlTv0XhAEfogJwz04w/uwOeid1eOmUHU01ofHDBxje/RCWIqTPSyboNuoYfX4HZnMPDp+V8BeyKRExk53z39E0/mZmlIdvw/JUXRJINsanLGxqU7Ihyud6AbwgZKkKEvEEUbyqw5JBMRrDP9E2jtmEDsXdgx85nF2OH9/l1GOSxLoE6oq7vitLFEVOqOnJbtcw4BxG6iIY1hFtvAt/sAOfYlfBavA7T120Th29Vj4FRapQ5C8hVIPtZdTik59hfvQK7OYvCDj86jKtJiWeNVwNtV4S3RD+J0MeWfDK90POccC59Q1tA+kyuNI/qKpSY5ndKsriepMbwqyckMxnzQIS86+AIxTQKkTquiKUaOVi/TKEMePJMeEFXJOcTaG7xxpqJAu7XP9/ZOUU/wKgo67sYlcKIwAAAABJRU5ErkJggg==')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"Architecture\",\n        \"title\": \"Cloud Database Resources Architecture\",\n        \"src\": \"/att-cloudnative/ibmcloud-pattern-guide/static/0286e443cdaefc3d2d03e2e803e1063a/1b1fd/IaC-Cloud_Services_Resources.png\",\n        \"srcSet\": [\"/att-cloudnative/ibmcloud-pattern-guide/static/0286e443cdaefc3d2d03e2e803e1063a/7fc1e/IaC-Cloud_Services_Resources.png 288w\", \"/att-cloudnative/ibmcloud-pattern-guide/static/0286e443cdaefc3d2d03e2e803e1063a/a5df1/IaC-Cloud_Services_Resources.png 576w\", \"/att-cloudnative/ibmcloud-pattern-guide/static/0286e443cdaefc3d2d03e2e803e1063a/1b1fd/IaC-Cloud_Services_Resources.png 762w\"],\n        \"sizes\": \"(max-width: 762px) 100vw, 762px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <p>{`The code to build these resources can be downloaded from the GitHub repository `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/IBM/cloud-enterprise-examples/\"\n      }}>{`https://github.com/IBM/cloud-enterprise-examples/`}</a>{` in the directory `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/IBM/cloud-enterprise-examples/tree/master/iac/08_cloud-services\"\n      }}>{`08_cloud-services`}</a>{`.`}</p>\n    <AnchorLinks small mdxType=\"AnchorLinks\">\n  <AnchorLink mdxType=\"AnchorLink\">Cloud Database Services</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">MongoDB</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Access the database with MongoDB Compass</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Access to the MongoDB database with Python</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">PostgreSQL</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Access to the PostgreSQL database with NodeJS</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Service Instances</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Message Queue</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Final Terraform code</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Clean up</AnchorLink>\n    </AnchorLinks>\n    <p>{`As you look at the PostgreSQL & MongoDB code, you will notice the similarity.  In fact, except for the `}<inlineCode parentName=\"p\">{`service`}</inlineCode>{` type, they are identical.  This is because the scripts are using Resource Management Resources and managing resources for the IBM Cloud database services.  You can find out more about it `}<a parentName=\"p\" {...{\n        \"href\": \"https://cloud.ibm.com/docs/terraform?topic=terraform-resource-mgmt-resources#resource-instance\"\n      }}>{`here`}</a>{`.`}</p>\n    <h2>{`Cloud Database Services`}</h2>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://www.ibm.com/cloud/databases\"\n      }}>{`IBM Cloud Database`}</a>{` offers many database options, with each one being useful for a particular use-case. The IBM Cloud Provider supports creation of `}<a parentName=\"p\" {...{\n        \"href\": \"https://cloud.ibm.com/docs/terraform?topic=terraform-databases-resources\"\n      }}>{`Cloud Databases resources`}</a>{` of several different flavors including: `}<strong parentName=\"p\">{`etcd`}</strong>{`, `}<strong parentName=\"p\">{`PostgreSQL`}</strong>{`, `}<strong parentName=\"p\">{`Redis`}</strong>{`, `}<strong parentName=\"p\">{`ElasticSearch`}</strong>{`, `}<strong parentName=\"p\">{`MongoDB`}</strong>{` and messaging with `}<strong parentName=\"p\">{`RabbitMQ`}</strong>{`.`}</p>\n    <p>{`To create a Cloud Database we use the Terraform resource `}<inlineCode parentName=\"p\">{`ibm_database`}</inlineCode>{`. No matter what database flavor is provisioned, we always provide the same input parameters and get the same output parameters. The DB flavor will only affect the values of these parameters.`}</p>\n    <p>{`The following table lists the most relevant input parameters for the `}<inlineCode parentName=\"p\">{`ibm_database`}</inlineCode>{` resource.`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Input parameter`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`name`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`name to identify the `}<em parentName=\"td\">{`database instance`}</em>{`.  The name must not include spaces. Notice that this is not the name as the database`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`plan`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`service plan that you choose for your instance. The supported values is `}<inlineCode parentName=\"td\">{`standard`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`location`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`location to deploy your instance, it must match the region parameter that you specify in the provider block`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`tags`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`optional list of tags to add to your instance`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`service`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`type of Cloud Databases to create, the following services are accepted: `}<inlineCode parentName=\"td\">{`databases-for-etcd`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`databases-for-postgresql`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`databases-for-mongodb`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`databases-for-redis`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`databases-for-elasticsearch`}</inlineCode>{` and `}<inlineCode parentName=\"td\">{`messages-for-rabbitmq`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`adminpassword`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`password for the database administrator. If not specified, additional users must be specified in a user block`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`members_memory_allocation_mb`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`amount of memory in megabytes for the database, split across all members`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`members_disk_allocation_mb`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`amount of disk space for the database, split across all members`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`members_cpu_allocation_count`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`allocates the number of specified dedicated cores to your deployment`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`backup_id`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`CRN of a backup resource to restore from. The backup must have been created by a database deployment with the same service ID. The backup is loaded after provisioning and the new deployment starts up that uses that data. A backup CRN is in the format `}<inlineCode parentName=\"td\">{`crn:v1:<…>:backup:`}</inlineCode>{`. If omitted, the database is provisioned empty`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`key_protect_key`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`CRN of a Key Protect root key that you want to use for disk encryption. A key protect CRN is in the format `}<inlineCode parentName=\"td\">{`crn:v1:<…>:key:`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`key_protect_instance`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`CRN of a Key Protect instance that you want to use for disk encryption. A key protect CRN is in the format `}<inlineCode parentName=\"td\">{`crn:v1:<…>::`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`service_endpoints`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`to enable the `}<inlineCode parentName=\"td\">{`public`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`private`}</inlineCode>{`, or both `}<inlineCode parentName=\"td\">{`public-and-private`}</inlineCode>{` service endpoints. The default is `}<inlineCode parentName=\"td\">{`public`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`users`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`list of users to create on the database. Multiple blocks are allowed`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`users.name`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`name of the user ID to add to the database instance. The user ID must be between 5 and 32 characters`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`users.password`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`password for the user ID. The password must be between 10 and 32 characters`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`whitelist`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`list of IP addresses to allow access for the database. Multiple blocks are allowed. If not specified access from any IP is allowed`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`whitelist.address`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The IP address or range of database client addresses to be whitelisted in CIDR format. Example: `}<inlineCode parentName=\"td\">{`172.168.1.2/32`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`The list of output parameters is like follows:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Input parameter`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`id`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`CRN of the database instance`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`status`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`status of the instance`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`adminuser`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`user ID of the database administrator. Example: `}<inlineCode parentName=\"td\">{`admin`}</inlineCode>{` or `}<inlineCode parentName=\"td\">{`root`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`version`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`database version`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`connectionstrings`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`list of `}<a parentName=\"td\" {...{\n              \"href\": \"https://cloud.ibm.com/docs/services/databases-for-postgresql?topic=databases-for-postgresql-connection-strings\"\n            }}>{`connection strings`}</a>{` for the database for each user ID. The results are returned in pairs of the userid and string: `}<inlineCode parentName=\"td\">{`connectionstrings.1.name = admin connectionstrings.1.string = postgres://admin:$PASSWORD@79226bd4-4076-4873-b5ce-b1dba48ff8c4.b8a5e798d2d04f2e860e54e5d042c915.databases.appdomain.cloud:32554/ibmclouddb?sslmode=verify-full`}</inlineCode>{` Individual string parameters can be retrieved using Terraform variables and outputs `}<inlineCode parentName=\"td\">{`connectionstrings.x.hosts.x.port`}</inlineCode>{` and `}<inlineCode parentName=\"td\">{`connectionstrings.x.hosts.x.host`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`The following sections will explain how to create a simple Cloud Database with `}<strong parentName=\"p\">{`MongoDB`}</strong>{` and `}<strong parentName=\"p\">{`PostgreSQL`}</strong>{`. To view an example of `}<strong parentName=\"p\">{`etcd`}</strong>{`, refer to the section `}<a parentName=\"p\" {...{\n        \"href\": \"/att-cloudnative/ibmcloud-pattern-guide/iac/getting-started-terraform/remote-state\"\n      }}>{`Setup Terraform Remote State using etcd as backend`}</a>{`.`}</p>\n    <h2>{`MongoDB`}</h2>\n    <p>{`This is a simple example to create a single instance running MongoDB. The final code can be found in the directory `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/IBM/cloud-enterprise-examples/tree/master/iac/08_cloud-services/simple_mongodb\"\n      }}>{`08_cloud-services/simple_mongodb`}</a>{` of the GitHub repository with all the code patterns. A full example with application setup on VSI compute can be found in the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/IBM/cloud-enterprise-examples/tree/master/iac/08_cloud-services\"\n      }}>{`08_cloud-services`}</a>{` and is discussed towards the end of this article.`}</p>\n    <p>{`To create a MongoDB Cloud Database use the service `}<inlineCode parentName=\"p\">{`databases-for-mongodb`}</inlineCode>{`. Create a file to store the database definition (i.e. `}<inlineCode parentName=\"p\">{`db.tf`}</inlineCode>{`) with a code similar to this one:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"path=db.tf\",\n        \"path\": \"db.tf\"\n      }}>{`variable \"db_admin_password\" {}\n\nresource \"ibm_database\" \"db_instance\" {\n  name              = \"sampledb\"\n  plan              = \"standard\"\n  location          = \"us-south\"\n  service           = \"databases-for-mongodb\"\n  resource_group_id = data.ibm_resource_group.group.id\n\n  adminpassword                = var.db_admin_password\n  members_memory_allocation_mb = \"3072\"\n  members_disk_allocation_mb   = \"61440\"\n}\n`}</code></pre>\n    <p>{`A simple `}<inlineCode parentName=\"p\">{`main.tf`}</inlineCode>{` code to use the previous database would be like so:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"path=main.tf\",\n        \"path\": \"main.tf\"\n      }}>{`provider \"ibm\" {\n  region     = \"us-south\"\n  generation = 2\n}\n\ndata \"ibm_resource_group\" \"group\" {\n  name = \"Default\"\n}\n`}</code></pre>\n    <p>{`To view some important output parameters of the provisioned database create the `}<inlineCode parentName=\"p\">{`output.tf`}</inlineCode>{` file with these output variables:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"path=output.tf\",\n        \"path\": \"output.tf\"\n      }}>{`output \"db_connection_composed\" {\n  value = ibm_database.db_instance.connectionstrings.0.composed\n}\noutput \"db_connection_certbase64\" {\n  value = ibm_database.db_instance.connectionstrings.0.certbase64\n}\noutput \"db_admin_password\" {\n  value = var.db_admin_password\n}\n`}</code></pre>\n    <p>{`If you need more parameters, add the following output variables to get all the parameters, then add variables with the values of the parameters of the `}<inlineCode parentName=\"p\">{`connectionstrings`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`db_instance`}</inlineCode>{` JSON objects.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\"\n      }}>{`output \"db_connection_string\" {\n  value = ibm_database.db_instance.connectionstrings.0\n}\noutput \"instance\" {\n  value = ibm_database.db_instance\n}\n`}</code></pre>\n    <p>{`To define the value of the admin password variable export the variable `}<inlineCode parentName=\"p\">{`TF_VAR_db_admin_password`}</inlineCode>{` with a password with 10-32 characters or use the following command to generate a random password. The password will be used by the URI in the variable `}<inlineCode parentName=\"p\">{`PASSWORD`}</inlineCode>{`, so we are exporting both.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`export PASSWORD=$(LC_CTYPE=C tr -dc 'a-zA-Z0-9' < /dev/urandom | head -c 32)\nexport TF_VAR_db_admin_password=$PASSWORD\n`}</code></pre>\n    <p>{`To create the database just execute the following terraform commands:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`terraform init\nterraform plan\nterraform apply\n`}</code></pre>\n    <p>{`You’ll see the output of the last command with the connection string URI with the variable `}<inlineCode parentName=\"p\">{`db_connection_composed`}</inlineCode>{` and the CA certificate encoded with base64 in the variable `}<inlineCode parentName=\"p\">{`db_connection_certbase64`}</inlineCode>{`. To get the output varibles again use the command `}<inlineCode parentName=\"p\">{`terraform output`}</inlineCode>{`.`}</p>\n    <p>{`You’ll need to save the output variables into environment variables and the certificate to a file executing these commands. In order to interpolate the `}<inlineCode parentName=\"p\">{`PASSWORD`}</inlineCode>{` variable into the `}<inlineCode parentName=\"p\">{`APP_MONGODB_URI`}</inlineCode>{` variable you have to use the `}<inlineCode parentName=\"p\">{`eval`}</inlineCode>{` command like so.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`terraform output db_connection_certbase64 | base64 --decode > db_ca.crt\nexport PASSWORD=$(terraform output db_admin_password)\nexport APP_MONGODB_URI=$(eval 'echo \"'$(terraform output db_connection_composed)'\"')\necho $APP_MONGODB_URI\n`}</code></pre>\n    {\n      /*\n      The database name in the URI is `ibmclouddb`, assumig the DB name is `demodb` let's use the `sed` command to change it, like so:\n      ```bash\n      export DB_NAME=demodb\n      export APP_MONGODB_URI=$(echo $APP_MONGODB_URI | sed 's|/ibmclouddb?|/$DB_NAME?|')\n      echo $APP_MONGODB_URI\n      ```\n      */\n    }\n    <p>{`All you need to conect to the database is the conection URI, from the environment variable `}<inlineCode parentName=\"p\">{`APP_MONGODB_URI`}</inlineCode>{`, and the CA Certificate, stored in the file `}<inlineCode parentName=\"p\">{`./db_ca.crt`}</inlineCode>{`.`}</p>\n    <h2>{`Access the database with MongoDB Compass`}</h2>\n    <p>{`Let’s use the client MongoDB Compass to access the new provisioned database. Download and install the `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.mongodb.com/try/download/compass\"\n      }}>{`MongoDB Compass`}</a>{` application for your platform. Alternatively you can use the `}<inlineCode parentName=\"p\">{`brew`}</inlineCode>{` command on Mac OS X to install it.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`brew cask install mongodb-compass\n`}</code></pre>\n    <p>{`Open MongoDB Compass and you’ll see the new connection screen. Copy and paste the connection URI from the environment variable `}<inlineCode parentName=\"p\">{`APP_MONGODB_URI`}</inlineCode>{` in the `}<strong parentName=\"p\">{`Paste your connection string`}</strong>{` field.`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1152px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"43.05555555555555%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABNklEQVQoz52Sz07DMAzG87RceBUOvAtC4sABIYTEgRdA3WBbtmT9k3VtkmZL2w87YmgIMWlY+tVfHNmJ3YjZfIHlSkHKJRbMQqLeNljpHO9zibyo4LsA6zy879CRZkL4De8LpTT0Ok+wVnqdCnIhLlpWG7TWpYJma/GhN5gRk5XBVG2Qffk3WaGifTGOwECfYRjBmun7gfyY4DivY4wIuz2sD4n2CF43jrT1EMYYFHmOuq5RFAVKpiyhtYapqhTTSsG2bTrglPEoBPdurUVLCcyxPtA0TYp77ymp+4bXu7jHnm4f+z7NWkQKOOd+JLH/q/DBb4lALR6bp0ME/mGHxu/lKy4ernD5eI272QsQwT+FBz+cRU/tsU2MxE32hNvpMzLScRch+DmciyNaGlMMdCWuTbDm2CfFa7TBm/Pj3QAAAABJRU5ErkJggg==')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"mongodb compass 1\",\n        \"title\": \"mongodb compass 1\",\n        \"src\": \"/att-cloudnative/ibmcloud-pattern-guide/static/d559544361f987f23e3643a7d75c099b/3cbba/mongodb_compass_1.png\",\n        \"srcSet\": [\"/att-cloudnative/ibmcloud-pattern-guide/static/d559544361f987f23e3643a7d75c099b/7fc1e/mongodb_compass_1.png 288w\", \"/att-cloudnative/ibmcloud-pattern-guide/static/d559544361f987f23e3643a7d75c099b/a5df1/mongodb_compass_1.png 576w\", \"/att-cloudnative/ibmcloud-pattern-guide/static/d559544361f987f23e3643a7d75c099b/3cbba/mongodb_compass_1.png 1152w\", \"/att-cloudnative/ibmcloud-pattern-guide/static/d559544361f987f23e3643a7d75c099b/a5a5c/mongodb_compass_1.png 1244w\"],\n        \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <p>{`Click on `}<strong parentName=\"p\">{`Fill in connection fields individually`}</strong>{`, then select the `}<strong parentName=\"p\">{`More Options`}</strong>{` tab. Select `}<strong parentName=\"p\">{`Server Validation`}</strong>{` in the `}<strong parentName=\"p\">{`SSL`}</strong>{` field, then select the `}<inlineCode parentName=\"p\">{`db_ca.crt`}</inlineCode>{` file in the `}<strong parentName=\"p\">{`Certificate Authority`}</strong>{` field.`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1152px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"84.72222222222221%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACBElEQVQ4y5VUy47UMBDMn3PiNzhw48AvICFxQOLGAQmJWQ2zk9dkNokT52U7Kbqc8W6WmUWspVLHsV1d/bCjLMuR5yekYjOxSZqiOJ9RqwZJdvJodYeuHx6hBcMwYBxGsU/o5X9EwjhJhSjz9v4YIz8VKGuFY5LhmOZQrYbueiFe0fU9krPC77zGQRBsqTSiyRg4N8PNM+Z58ZbzRb7DsMZimgy4l9aI1f0IpYcV3WobcRYZ2YxlEbk9tG7hrMNoJ+yzGLvjAXfJEZMznniRfQG3BsOOjFfoxPOEcRy9snrSuFMp9irDropRjo04sjACu4EJuHD0K6F9ciGei6JAVVZQZY1BijEbh0Ypf2D2aXkZvRTqkTCE0XUdmrZB0zSS/E429TJvnynbgo6okN/PFAZCElHlWdAKEduD//6ljGRM2fA3IRe3Y/YVXxUwvzzE+VZdwBryDYVhcFNd1776SnJYlqV0gb5yyHMkp8MrhVVV4Sy3hJZhkyxUP1iu8TadZJ3zlWi4nUMusChho720RDhEMK8kZV63hO6loqwNuhIHVSS91dC+ILPk2K636CrkAOaKOaMKhk2EAgVYxxu2TTpCH/7ftdquh264b0/4uPuMD78+4Wd1gJscIubptWO5SPvxsMfbb+/x5us7fIm/yysCRHzfKPW14DkzSnRm8bCT9U/cH+d3K3YR1ItcAAAAAElFTkSuQmCC')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"mongodb compass 2\",\n        \"title\": \"mongodb compass 2\",\n        \"src\": \"/att-cloudnative/ibmcloud-pattern-guide/static/17b7f1da25ec8199a85b4f895416f93f/3cbba/mongodb_compass_2.png\",\n        \"srcSet\": [\"/att-cloudnative/ibmcloud-pattern-guide/static/17b7f1da25ec8199a85b4f895416f93f/7fc1e/mongodb_compass_2.png 288w\", \"/att-cloudnative/ibmcloud-pattern-guide/static/17b7f1da25ec8199a85b4f895416f93f/a5df1/mongodb_compass_2.png 576w\", \"/att-cloudnative/ibmcloud-pattern-guide/static/17b7f1da25ec8199a85b4f895416f93f/3cbba/mongodb_compass_2.png 1152w\", \"/att-cloudnative/ibmcloud-pattern-guide/static/17b7f1da25ec8199a85b4f895416f93f/34524/mongodb_compass_2.png 1250w\"],\n        \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <p>{`Create a database clicking on the `}<strong parentName=\"p\">{`CREATE DATABASE`}</strong>{` button. Name the database `}<inlineCode parentName=\"p\">{`demodb`}</inlineCode>{` and the collection `}<inlineCode parentName=\"p\">{`users`}</inlineCode>{`.`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1010px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"100.69444444444444%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAACaklEQVQ4y52US2/TQBDH/SE5cEVc+BYcuMEBCVFB1YIQFBUqIRWohEDQRwQHlLRJqdqQh2PHjzi2GzuxYyfx68/sOgkgFdF6pZ/+6931eGZnxkLl6BCqqkKSpCWyLMMwjEIIXbmL4XAI27ZhWRb6/T4GgwGKDoF5d9FIkqQQgiiKGJGHruPAdV34nocsywp5l6ZpbpCFa/R6PGSHDBf1Lo7jPOSIJq47RDr3jH3pqjCDzI4gyxLGvg9vNILve3yeZWkh+B022yK6PQuy1oekGeioBsazhEivzDQigw1JxSicwQ+nPFwWdJQCsyTDNE7/yyTKlTkxDClkqavC9ScwbAe268McjLgOx1MEdDgkgjnhBSzPzJhx8lCjpEzCgLKsw6GCtkwTg/NzhEFQoGySPMue5/O2YV1yTsZ0Tef4PEHZJcmbYdkpURTxOkqIOM7nLHNX8pAZPBE7KPUd7Kom9jQLuwTTfd3mumCxf6CzPWK+/oXWd1XapzU7nECoNNt4XlewVmtj/VjE6lGuT086ePKjw5WxVhOxUm5htSri0WEbK5UWnp1KeFGXsVHvYqOpQPMDCDWqww/0hbeivuRdh9Hj8/dSD9ti/vy6rmKLeHWmYPNUwY5s4JNu4qNmYqdLv69xSL8vRUFM8Yd0ZxO6gyXxQuPl8zTJmaU57J0g+g1vPYUMshHPk7JITPLHfKFpkvKLz0jB8pVmf2lGKphUd5cdFpWU73iomD9xfe8Obpbu4UbpLm59u49rn2+jPGhAqFarvP40TYOu6/+ElddZvY5Wo4XvZ1U8PNjE49IWZ/3rGzzYf4ly4xi/AJLH7JEyqiZaAAAAAElFTkSuQmCC')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"mongodb compass 3\",\n        \"title\": \"mongodb compass 3\",\n        \"src\": \"/att-cloudnative/ibmcloud-pattern-guide/static/256453afcaa6f38f9ca096af38c24c05/96101/mongodb_compass_3.png\",\n        \"srcSet\": [\"/att-cloudnative/ibmcloud-pattern-guide/static/256453afcaa6f38f9ca096af38c24c05/7fc1e/mongodb_compass_3.png 288w\", \"/att-cloudnative/ibmcloud-pattern-guide/static/256453afcaa6f38f9ca096af38c24c05/a5df1/mongodb_compass_3.png 576w\", \"/att-cloudnative/ibmcloud-pattern-guide/static/256453afcaa6f38f9ca096af38c24c05/96101/mongodb_compass_3.png 1010w\"],\n        \"sizes\": \"(max-width: 1010px) 100vw, 1010px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <p>{`Click on the `}<strong parentName=\"p\">{`demodb`}</strong>{` database, click on the `}<strong parentName=\"p\">{`users`}</strong>{` collection, then on ADD DATA > Insert Document to add any data you want, like the following example:`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1152px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"22.916666666666668%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA4UlEQVQY032PSU4DMRBFff8TsOEMESdgyxYBG2CBorTSuJ14nun+VDkgZYGw9PXL5ecahNQJ+mxQa8W2bUN81nUdzvffOKUEay1KKcg5jz8lF/RS0SiOMUK8TnvMRiER4L0fUP15bL1TkYwQAlrrCJRzxPT+NYozE8knu8An4muDeJ7e8KGPA+auDHCRyxQk8kITcMzO4gYxJiyLwmE+4ubxDk+HdzjjIG4fdti93MM4i9NZQ6kTtDY0SfhT1nnMnxJSLpBUkHljPIy95IVTBsUn6hppSlqDVyT/T8xc6zr/DZxMf3drZF7LAAAAAElFTkSuQmCC')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"mongodb compass 4\",\n        \"title\": \"mongodb compass 4\",\n        \"src\": \"/att-cloudnative/ibmcloud-pattern-guide/static/ee6a9127e0b490d3b67b4e5fe67210c4/3cbba/mongodb_compass_4.png\",\n        \"srcSet\": [\"/att-cloudnative/ibmcloud-pattern-guide/static/ee6a9127e0b490d3b67b4e5fe67210c4/7fc1e/mongodb_compass_4.png 288w\", \"/att-cloudnative/ibmcloud-pattern-guide/static/ee6a9127e0b490d3b67b4e5fe67210c4/a5df1/mongodb_compass_4.png 576w\", \"/att-cloudnative/ibmcloud-pattern-guide/static/ee6a9127e0b490d3b67b4e5fe67210c4/3cbba/mongodb_compass_4.png 1152w\", \"/att-cloudnative/ibmcloud-pattern-guide/static/ee6a9127e0b490d3b67b4e5fe67210c4/0b124/mongodb_compass_4.png 1728w\", \"/att-cloudnative/ibmcloud-pattern-guide/static/ee6a9127e0b490d3b67b4e5fe67210c4/65838/mongodb_compass_4.png 2050w\"],\n        \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`[\n  {\n    \"_id\": \"5ee428b13265d9083baa0259\",\n    \"index\": 0,\n    \"picture\": \"http://placehold.it/32x32\",\n    \"age\": 21,\n    \"name\": \"Dale Duffy\",\n    \"gender\": \"male\",\n    \"email\": \"daleduffy@dognosis.com\"\n  },\n  {\n    \"_id\": \"5ee428b19eeb7916a4943a64\",\n    \"index\": 1,\n    \"picture\": \"http://placehold.it/32x32\",\n    \"age\": 36,\n    \"name\": \"Price West\",\n    \"gender\": \"male\",\n    \"email\": \"pricewest@dognosis.com\"\n  },\n  {\n    \"_id\": \"5ee428b198517601184ee994\",\n    \"index\": 2,\n    \"picture\": \"http://placehold.it/32x32\",\n    \"age\": 29,\n    \"name\": \"Arline Gordon\",\n    \"gender\": \"female\",\n    \"email\": \"arlinegordon@dognosis.com\"\n  },\n  {\n    \"_id\": \"5ee428b1cd9893fad62cf901\",\n    \"index\": 3,\n    \"picture\": \"http://placehold.it/32x32\",\n    \"age\": 37,\n    \"name\": \"Mathis Gould\",\n    \"gender\": \"male\",\n    \"email\": \"mathisgould@dognosis.com\"\n  },\n  {\n    \"_id\": \"5ee428b19e46e16ef1284030\",\n    \"index\": 4,\n    \"picture\": \"http://placehold.it/32x32\",\n    \"age\": 30,\n    \"name\": \"Rosemarie Morton\",\n    \"gender\": \"female\",\n    \"email\": \"rosemariemorton@dognosis.com\"\n  }\n]\n`}</code></pre>\n    <p>{`There is more information about how to use MongoDB Compass `}<a parentName=\"p\" {...{\n        \"href\": \"https://cloud.ibm.com/docs/databases-for-mongodb?topic=databases-for-mongodb-getting-started\"\n      }}>{`with the IBM Cloud Database`}</a>{` or about how to use `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.mongodb.com/compass/current/\"\n      }}>{`MongoDB Compass`}</a>{` in general.`}</p>\n    <h2>{`Access to the MongoDB database with Python`}</h2>\n    <p>{`For simplicity let’s create this code in Python to use the conection string and connect to the database. A similar code can be made in any other programming language.`}</p>\n    <p>{`In this example we’ll use the `}<a parentName=\"p\" {...{\n        \"href\": \"https://pypi.org/project/pymongo/\"\n      }}>{`pymongo`}</a>{` package and a JSON file with mock data to import into the database. All the code is located in the directory `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/IBM/cloud-enterprise-examples/tree/master/iac/08_cloud-services/simple_mongodb\"\n      }}>{`08_cloud-services/simple_mongodb`}</a>{` of the GitHub repository with all the code patterns.`}</p>\n    <p>{`The `}<inlineCode parentName=\"p\">{`pymongo`}</inlineCode>{` package requires the connection URI, obtained from the environment variable `}<inlineCode parentName=\"p\">{`APP_MONGODB_URI`}</inlineCode>{` and the CA certificate from the file `}<inlineCode parentName=\"p\">{`db_ca.crt`}</inlineCode>{`, like so.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\"\n      }}>{`from pymongo import MongoClient\nimport os\n\nmongodb_uri = os.environ.get('APP_MONGODB_URI')\n\nclient = MongoClient(mongodb_uri,\n                     ssl=True,\n                     ssl_ca_certs=\"./db_ca.crt\")\n`}</code></pre>\n    <p>{`The rest of the application is a sample code to insert many documents or just one, to find documents and query the database. Similar sample code can be found in the pymongo `}<a parentName=\"p\" {...{\n        \"href\": \"https://pypi.org/project/pymongo/\"\n      }}>{`documentation`}</a>{` or in this `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.w3schools.com/python/python_mongodb_getstarted.asp\"\n      }}>{`tutorial`}</a>{`. The entire code is shown below and also can be downloaded from `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/IBM/cloud-enterprise-examples/tree/master/iac/08_cloud-services/simple_mongodb/app.py\"\n      }}>{`here`}</a>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\",\n        \"metastring\": \"path=app.py\",\n        \"path\": \"app.py\"\n      }}>{`from pymongo import MongoClient\nimport json\nimport os\n\nmongodb_uri = os.environ.get('APP_MONGODB_URI')\n\nclient = MongoClient(mongodb_uri,\n                     ssl=True,\n                     ssl_ca_certs=\"./db_ca.crt\")\n\ndbnames = client.list_database_names()\n\ndb = client['demodb']\nbooks = db['books']\n\nif not books.find_one():\n    with open('./db.json') as f:\n        data = json.load(f)\n    books.insert_many(data['books'])\n\nnew_book = {\n    \"isbn\": \"9781449325862\",\n    \"title\": \"Git Pocket Guide\",\n    \"subtitle\": \"A Working Introduction\",\n    \"author\": \"Richard E. Silverman\",\n    \"published\": \"2013-08-02T00:00:00.000Z\",\n    \"publisher\": \"O'Reilly Media\",\n    \"pages\": 234,\n    \"description\": \"This pocket guide is the perfect on-the-job companion to Git, the distributed version control system. It provides a compact, readable introduction to Git for new users, as well as a reference to common commands and procedures for those of you with Git experience.\",\n    \"website\": \"http://chimera.labs.oreilly.com/books/1230000000561/index.html\"\n}\n\nif books.count_documents({\"isbn\": new_book['isbn']}) == 0:\n    book = books.insert_one(new_book)\n    print(\"The new book has been inserted. ID = \", book.inserted_id)\n\nprint(\"Books:\")\nfor book in books.find({}, {\"title\": 1}):\n    print(\"\\\\t\", book)\n\nquery = {\"publisher\": \"O'Reilly Media\"}\nprint(\"O'Reilly Media's Books:\")\nfor book in books.find(query, {\"title\": 1, \"publisher\": 1}):\n    print(\"\\\\t\", book)\n\nclient.close()\n`}</code></pre>\n    <h2>{`PostgreSQL`}</h2>\n    <p>{`This is another simple example to create a single instance running PostgreSQL. The final code can be found in the directory `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/IBM/cloud-enterprise-examples/tree/master/iac/08_cloud-services/simple_postgresql\"\n      }}>{`08_cloud-services/simple_postgresql`}</a>{` of the GitHub repository with all the code patterns.`}</p>\n    <p>{`To create a PostgreSQL Cloud Database use the service `}<inlineCode parentName=\"p\">{`databases-for-postgresql`}</inlineCode>{`. Create a file to store the database definition (i.e. `}<inlineCode parentName=\"p\">{`db.tf`}</inlineCode>{`) with a code similar to this one:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"path=db.tf\",\n        \"path\": \"db.tf\"\n      }}>{`resource \"ibm_database\" \"db_instance\" {\n  name              = \"sampledb\"\n  plan              = \"standard\"\n  location          = \"us-south\"\n  service           = \"databases-for-postgresql\"\n  resource_group_id = data.ibm_resource_group.group.id\n\n  adminpassword                = \"P@ssW0rd\"\n  members_memory_allocation_mb = \"3072\"\n  members_disk_allocation_mb   = \"61440\"\n}\n`}</code></pre>\n    <p>{`A simple `}<inlineCode parentName=\"p\">{`main.tf`}</inlineCode>{` code to use the previous database would be like so:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"path=main.tf\",\n        \"path\": \"main.tf\"\n      }}>{`provider \"ibm\" {\n  region             = \"us-south\"\n  generation         = 2\n}\n\ndata \"ibm_resource_group\" \"group\" {\n  name = \"Default\"\n}\n`}</code></pre>\n    <p>{`To view some important output parameters of the provisioned database create the `}<inlineCode parentName=\"p\">{`output.tf`}</inlineCode>{` file with these output variables:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"path=output.tf\",\n        \"path\": \"output.tf\"\n      }}>{`output \"db_connection_composed\" {\n  value = ibm_database.db_instance.connectionstrings.0.composed\n}\noutput \"db_connection_certbase64\" {\n  value = ibm_database.db_instance.connectionstrings.0.certbase64\n}\n`}</code></pre>\n    <p>{`If you need more parameters, add the following output variables to get all the parameters, then add variables with the values of the parameters of the `}<inlineCode parentName=\"p\">{`connectionstrings`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`db_instance`}</inlineCode>{` JSON objects.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\"\n      }}>{`output \"db_connection_string\" {\n  value = ibm_database.db_instance.connectionstrings.0\n}\noutput \"instance\" {\n  value = ibm_database.db_instance\n}\n`}</code></pre>\n    <p>{`To define the value of the admin password variable export the variable `}<inlineCode parentName=\"p\">{`TF_VAR_db_admin_password`}</inlineCode>{` with a password with 10-32 characters or use the following command to generate a random password. The password will be used by the URI in the variable `}<inlineCode parentName=\"p\">{`PASSWORD`}</inlineCode>{`, so we are exporting both.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`export PASSWORD=$(LC_CTYPE=C tr -dc 'a-zA-Z0-9' < /dev/urandom | head -c 32)\nexport TF_VAR_db_admin_password=$PASSWORD\n`}</code></pre>\n    <p>{`To create the database just execute the following terraform commands:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`terraform init\nterraform plan\nterraform apply\n`}</code></pre>\n    <p>{`You’ll see the output of the last command with the connection string URI with the variable `}<inlineCode parentName=\"p\">{`db_connection_composed`}</inlineCode>{` and the CA certificate encoded with base64 in the variable `}<inlineCode parentName=\"p\">{`db_connection_certbase64`}</inlineCode>{`. To get the output varibles again use the command `}<inlineCode parentName=\"p\">{`terraform output`}</inlineCode>{`.`}</p>\n    <p>{`You’ll need to save the output variables into environment variables and the certificate to a file executing these commands. In order to interpolate the `}<inlineCode parentName=\"p\">{`PASSWORD`}</inlineCode>{` variable into the `}<inlineCode parentName=\"p\">{`APP_POSTGRESQL_URI`}</inlineCode>{` variable you have to use the `}<inlineCode parentName=\"p\">{`eval`}</inlineCode>{` command like so.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`terraform output db_connection_certbase64 | base64 --decode > db_ca.crt\nexport PASSWORD=$(terraform output db_admin_password)\nexport APP_POSTGRESQL_URI=$(eval 'echo \"'$(terraform output db_connection_composed)'\"')\n`}</code></pre>\n    <p>{`The database name in the URI is `}<inlineCode parentName=\"p\">{`ibmclouddb`}</inlineCode>{`, assumig the DB name is `}<inlineCode parentName=\"p\">{`demo`}</inlineCode>{` let’s use the `}<inlineCode parentName=\"p\">{`sed`}</inlineCode>{` command to change it, like so:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`export DB_NAME=demo\nexport APP_POSTGRESQL_URI=$(echo $APP_POSTGRESQL_URI | sed \"s|/ibmclouddb?|/$DB_NAME?|\")\necho $APP_POSTGRESQL_URI\n`}</code></pre>\n    <p>{`All you need to conect to the database is the conection URI, from the environment variable `}<inlineCode parentName=\"p\">{`APP_POSTGRESQL_URI`}</inlineCode>{`, and the CA Certificate, stored in the file `}<inlineCode parentName=\"p\">{`./db_ca.crt`}</inlineCode>{`.`}</p>\n    <h2>{`Access to the PostgreSQL database with NodeJS`}</h2>\n    <p>{`For simplicity let’s create this code in NodeJS to use the conection string and connect to the database. A similar code can be made in any other programming language.`}</p>\n    <p>{`Let’s install the PostgreSQL client `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.pgadmin.org/download/\"\n      }}>{`pgAdmin`}</a>{` which is GUI/Web client. It can also be installed on Mac OS X with `}<inlineCode parentName=\"p\">{`brew`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`brew cask install pgadmin4\n`}</code></pre>\n    <p>{`To connect to the Cloud Database using pgAdmin read the `}<a parentName=\"p\" {...{\n        \"href\": \"https://cloud.ibm.com/docs/databases-for-postgresql?topic=databases-for-postgresql-getting-started\"\n      }}>{`documentation`}</a>{` or follow this quick instructions:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Add a New Server with any given name (i.e. `}<inlineCode parentName=\"li\">{`ibmcloud`}</inlineCode>{`)`}</li>\n      <li parentName=\"ol\">{`Go to the Connection tab, enter the `}<strong parentName=\"li\">{`Host name`}</strong>{` and `}<strong parentName=\"li\">{`Port`}</strong>{` from the `}<inlineCode parentName=\"li\">{`APP_POSTGRESQL_URI`}</inlineCode>{` variable.`}</li>\n      <li parentName=\"ol\">{`Enter the `}<strong parentName=\"li\">{`Password`}</strong>{` from the `}<inlineCode parentName=\"li\">{`PASSWORD`}</inlineCode>{` variable.`}</li>\n      <li parentName=\"ol\">{`Go to the SSL tab, click on the 3 dots to select the `}<inlineCode parentName=\"li\">{`db_ca.crt`}</inlineCode>{` file under the `}<strong parentName=\"li\">{`Root certificate`}</strong>{` field.`}</li>\n      <li parentName=\"ol\">{`Click on the `}<strong parentName=\"li\">{`Save`}</strong>{` button.`}</li>\n    </ol>\n    <p>{`Using the GUI or the Query Tool (`}<strong parentName=\"p\">{`Tools`}</strong>{` > `}<strong parentName=\"p\">{`Query Tool`}</strong>{`), create the database `}<inlineCode parentName=\"p\">{`demo`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-sql\"\n      }}>{`CREATE DATABASE demo;\n`}</code></pre>\n    <p>{`Select the new database with the right click to open the `}<strong parentName=\"p\">{`Query Tool`}</strong>{` on the new database. Create the table `}<inlineCode parentName=\"p\">{`users`}</inlineCode>{` and insert a few records using the following SQL instruction:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-sql\"\n      }}>{`CREATE TABLE users (\n  ID SERIAL PRIMARY KEY,\n  name VARCHAR(30),\n  email VARCHAR(30),\n  age INT\n);\n\nINSERT INTO users (name, email, age)\n  VALUES\n    ('Dale Duffy', 'daleduffy@dognosis.com', 21),\n    ('Price West', 'pricewest@dognosis.com', 36);\n`}</code></pre>\n    <p>{`Verify the data either using the GUI or executing the following SQL instructions`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-sql\"\n      }}>{`SELECT * FROM users;\n`}</code></pre>\n    <p>{`Create a new NodeJS application and install the `}<inlineCode parentName=\"p\">{`pg`}</inlineCode>{` packages.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`mkdir app\ncd app\nnpm init\nnpm install pg\n`}</code></pre>\n    <p>{`Create the `}<inlineCode parentName=\"p\">{`index.js`}</inlineCode>{` with the following code to connect to the database, get the list of users and insert a new one.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`const { Pool, Client } = require(\"pg\");\nconst { readFileSync } = require(\"fs\");\nconst { join } = require(\"path\");\n\nconst connectionString = process.env.APP_POSTGRESQL_URI;\nconst caCertPath = join(__dirname, \"..\", \"db_ca.crt\");\nconst caCert = readFileSync(caCertPath);\n\n(async () => {\n  const pool = new Pool({\n    connectionString: connectionString,\n    ssl: {\n      ca: caCert,\n      rejectUnauthorized: true,\n    },\n  });\n\n  const resBefore = await pool.query(\"SELECT * FROM users\");\n  console.info(resBefore.rows);\n\n  pool.query(\"INSERT INTO users (name, email, age) VALUES ($1, $2, $3)\", [\n    \"Arline Gordon\",\n    \"arlinegordon@dognosis.com\",\n    29,\n  ]);\n\n  const resAfter = await pool.query(\"SELECT * FROM users\");\n  console.info(resAfter.rows);\n\n  await pool.end();\n})();\n`}</code></pre>\n    <p>{`Execute yuour code with the command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`node .\n`}</code></pre>\n    <p>{`Refer to the `}<a parentName=\"p\" {...{\n        \"href\": \"https://cloud.ibm.com/docs/databases-for-postgresql\"\n      }}>{`documentation`}</a>{` to know more about PostgreSQL database on IBM Cloud.`}</p>\n    <h2>{`Service Instances`}</h2>\n    <p>{`The `}<inlineCode parentName=\"p\">{`ibm_resource_instance`}</inlineCode>{` resource can be used to create, update or delete any of the offered services by IBM Cloud. You can retrieve list of offered services by installing the `}<inlineCode parentName=\"p\">{`catalogs-management`}</inlineCode>{` CLI plug-in and running the `}<inlineCode parentName=\"p\">{`service-marketplace`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`search`}</inlineCode>{` subcommands of such plugin.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`ibmcloud plugin install catalogs-management\n\nibmcloud catalog search\n\nibmcloud catalog service-marketplace\nibmcloud catalog service-marketplace | grep message\n\nibmcloud catalog service mqcloud\n`}</code></pre>\n    <p>{`You can use the same plugin to create the service however, in this page we’ll cover how to manage the service with Terraform, using the resource `}<inlineCode parentName=\"p\">{`ibm_resource_instance`}</inlineCode>{`.`}</p>\n    <p>{`The following table list the most relevant input parameters for the `}<inlineCode parentName=\"p\">{`ibm_resource_instance`}</inlineCode>{` resource.`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Input parameter`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`name`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`name to identify the resource instance`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`service`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`name of the service offering`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`plan`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`name of the plan type supported by service. You can retrieve the value by running the `}<inlineCode parentName=\"td\">{`ibmcloud catalog service <servicename>`}</inlineCode>{` command`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`location`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`target location or environment to create the resource instance`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`resource_group_id`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`ID of the resource group where you want to create the service. You can retrieve the value from data source `}<inlineCode parentName=\"td\">{`ibm_resource_group`}</inlineCode>{`. By default uses the Default resource group`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`parameters`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Arbitrary parameters to create instance. The value must be a JSON object`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <h2>{`Message Queue`}</h2>\n    <p>{`In this section we’ll see an example to create a Message & Queue service using the `}<inlineCode parentName=\"p\">{`ibm_resource_instance`}</inlineCode>{` resource. Create the file `}<inlineCode parentName=\"p\">{`mq.tf`}</inlineCode>{` with the `}<inlineCode parentName=\"p\">{`ibm_resource_instance`}</inlineCode>{` resource to create an `}<inlineCode parentName=\"p\">{`mqcloud`}</inlineCode>{` service.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"path=mq.rf\",\n        \"path\": \"mq.rf\"\n      }}>{`resource \"ibm_resource_instance\" \"resource_instance\" {\n  name              = \"mq-instance-test\"\n  service           = \"mqcloud\"\n  plan              = \"default\"\n  location          = \"us-south\"\n  resource_group_id = data.ibm_resource_group.group.id\n  tags              = [\"message queue\", \"testmq\"]\n\n  timeouts {\n    create = \"15m\"\n    update = \"15m\"\n    delete = \"15m\"\n  }\n}\n`}</code></pre>\n    <p>{`A simple `}<inlineCode parentName=\"p\">{`main.tf`}</inlineCode>{` file to use the above code would be like this:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"path=main.tf\",\n        \"path\": \"main.tf\"\n      }}>{`provider \"ibm\" {\n  region     = \"us-south\"\n  generation = 2\n}\n\ndata \"ibm_resource_group\" \"group\" {\n  name = \"Default\"\n}\n`}</code></pre>\n    <p>{`Execute this code with the following terraform commands:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`terraform init\nterraform plan\nterraform apply\n`}</code></pre>\n    <p>{`Refer to the `}<a parentName=\"p\" {...{\n        \"href\": \"https://cloud.ibm.com/docs/mqcloud\"\n      }}>{`documentation`}</a>{` to know how to use the MQ service from CLI, the Web Console or your own application.`}</p>\n    <h2>{`Final Terraform code`}</h2>\n    <p>{`The only cloud database service used in the complete demo application is MongoDB. You can download the code from the GitHub repository `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/IBM/cloud-enterprise-examples/\"\n      }}>{`https://github.com/IBM/cloud-enterprise-examples/`}</a>{` in the directory `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/IBM/cloud-enterprise-examples/tree/master/iac/08_cloud-services\"\n      }}>{`08_cloud-services`}</a>{`. This code builds off the compute example by adding the following resources and code.`}</p>\n    <p>{`The database definition file `}<inlineCode parentName=\"p\">{`db.tf`}</inlineCode>{` using the `}<inlineCode parentName=\"p\">{`ibm_database`}</inlineCode>{` resource.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"path=db.tf\",\n        \"path\": \"db.tf\"\n      }}>{`resource \"ibm_database\" \"iac_app_db_instance\" {\n  name              = var.db_name\n  plan              = var.db_plan\n  location          = var.region\n  service           = \"databases-for-mongodb\"\n  resource_group_id = data.ibm_resource_group.group.id\n\n  adminpassword                = var.db_admin_password\n  members_memory_allocation_mb = var.db_memory_allocation\n  members_disk_allocation_mb   = var.db_disk_allocation\n}\n`}</code></pre>\n    <p>{`Appending the new defined variables in the `}<inlineCode parentName=\"p\">{`variables.tf`}</inlineCode>{` file.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"path=variables.tf\",\n        \"path\": \"variables.tf\"\n      }}>{`variable \"db_plan\" {\n  default = \"standard\"\n}\nvariable \"db_name\" {\n  default = \"moviedb\"\n}\nvariable \"db_admin_password\" {\n  default = \"inSecureP@55w0rd\"\n}\nvariable \"db_memory_allocation\" {\n  default = \"3072\"\n}\nvariable \"db_disk_allocation\" {\n  default = \"61440\"\n}\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`compute.tf`}</inlineCode>{` file has a new Cloud-Init code in the VSI, like so:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"path=compute.tf\",\n        \"path\": \"compute.tf\"\n      }}>{`resource \"ibm_is_instance\" \"iac_app_instance\" {\n  ...\n\n  user_data = <<-EOUD\n            #!/bin/bash\n            mkdir -p /app\n\n            # Application script and dependencies\n            echo '\\${data.local_file.requirements.content_base64}' | base64 --decode > /app/requirements.txt\n            echo '\\${data.local_file.app.content_base64}' | base64 --decode > /app/app.py\n            # Script and database to initially import\n            echo '\\${data.local_file.db.content_base64}' | base64 --decode > /app/db.json\n            echo '\\${data.local_file.import.content_base64}' | base64 --decode > /app/import.py\n            # Configuration and credentials\n            echo '\\${ibm_database.iac_app_db_instance.connectionstrings.0.certbase64}' | base64 --decode > /app/db_certificate.cert\n            export PASSWORD=\\${var.db_admin_password}\n            export APP_MONGODB_URI=\"\\${ibm_database.iac_app_db_instance.connectionstrings.0.composed}\"\n            export APP_PORT=\\${var.port}\n\n\n            # https://askubuntu.com/questions/1154892/prevent-question-restart-services-during-package-upgrades-without-asking\n            echo '* libraries/restart-without-asking boolean true' | debconf-set-selections\n\n            # Python3 is installed by default, pip3 is not\n            apt update\n            apt install -y python3-pip\n\n            # Setup and initialize the DB\n            cd /app\n            pip3 install -r requirements.txt\n            python3 import.py\n\n            # Start up the application\n            python3 app.py &\n            EOUD\n\n  ...\n}\n`}</code></pre>\n    <p>{`In order to have access to the applications and dependencies file listed below we need to the fine the following terraform data sources with the files content.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"path=app.tf\",\n        \"path\": \"app.tf\"\n      }}>{`data \"local_file\" \"app\" {\n  filename = \"\\${path.module}/app/app.py\"\n}\n\ndata \"local_file\" \"import\" {\n  filename = \"\\${path.module}/app/import.py\"\n}\n\ndata \"local_file\" \"requirements\" {\n  filename = \"\\${path.module}/app/requirements.txt\"\n}\n\ndata \"local_file\" \"db\" {\n  filename = \"\\${path.module}/app/db.min.json\"\n}\n`}</code></pre>\n    <p>{`And these files are in the `}<inlineCode parentName=\"p\">{`app/`}</inlineCode>{` folder. The `}<inlineCode parentName=\"p\">{`app/app.py`}</inlineCode>{` file is the API application using `}<inlineCode parentName=\"p\">{`flask`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`flask-restful`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`flask_mongoengine`}</inlineCode>{` packages.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\",\n        \"metastring\": \"path=app/app.py\",\n        \"path\": \"app/app.py\"\n      }}>{`from flask import Flask, Response, request\nfrom flask_restful import Api, Resource\nfrom flask_mongoengine import MongoEngine\nfrom datetime import datetime\nimport json\nimport os\nimport logging\nimport ssl\n\nlogging.basicConfig(filename='app.log',\n                    level=logging.DEBUG)\nmongodb_uri = os.environ.get('APP_MONGODB_URI')\nif not mongodb_uri:\n    mongodb_uri = 'mongodb://localhost/moviedb'\nport = os.environ.get('APP_PORT')\nif not port:\n    port = '8080'\napp = Flask(__name__)\napp.config['MONGODB_SETTINGS'] = {\n    'MONGODB_HOST': mongodb_uri,\n    'MONGODB_DB': 'moviedb',\n    'MONGODB_SSL': True,\n    'MONGODB_SSL_CERT_REQS': ssl.CERT_REQUIRED,\n    'MONGODB_SSL_CA_CERTS': '/app/db_certificate.cert'\n}\napi = Api(app)\ndb = MongoEngine()\ndb.init_app(app)\n\nclass Movie(db.Document):\n    title = db.StringField(required=True)\n    titleSort = db.StringField()\n    originalTitle = db.StringField()\n    contentRating = db.StringField()\n    rating = db.FloatField()\n    ratingImage = db.StringField()\n    audienceRating = db.FloatField()\n    audienceRatingImage = db.StringField()\n    hasPremiumPrimaryExtra = db.IntField()\n    summary = db.StringField(required=False)\n    year = db.IntField(required=False)\n    tagline = db.StringField()\n    duration = db.IntField(required=False)\n    originallyAvailableAt = db.StringField(required=False)\n    addedAt = db.IntField(\n        default=datetime.timestamp(datetime.now()), required=False)\n    updatedAt = db.IntField(\n        default=datetime.timestamp(datetime.now()), required=False)\n    genre = db.StringField(required=True)\n    # genre = db.ListField(required=True)\n    director = db.ListField(db.StringField(), required=True)\n    writer = db.ListField(db.StringField(), required=False)\n    country = db.StringField(required=False)\n    cast = db.ListField(db.StringField(), required=True)\n\nclass MoviesApi(Resource):\n    def get(self):\n        movies = Movie.objects().to_json()\n        return Response(movies, mimetype=\"application/json\", status=200)\n\n    def post(self):\n        body = request.get_json()\n        movie = Movie(**body).save()\n        id = movie.id\n        return {'id': str(id)}, 200\n\nclass MovieApi(Resource):\n    def put(self, id):\n        body = request.get_json()\n        Movie.objects.get(id=id).update(**body)\n        return '', 200\n\n    def delete(self, id):\n        Movie.objects.get(id=id).delete()\n        return '', 200\n\n    def get(self, id):\n        movie = Movie.objects.get(id=id).to_json()\n        return Response(movie, mimetype=\"application/json\", status=200)\n\napi.add_resource(MoviesApi, '/api/movies')\napi.add_resource(MovieApi, '/api/movies/<id>')\n\n@app.route('/api/healthcheck')\ndef health_check():\n    return {'HealthCheckResponse': True}\n\napp.run(host='0.0.0.0', port=port)\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`import.py`}</inlineCode>{` application is executed before the API application on every instance created, however it only import the JSON db the first time it’s executed, so this avoid repeated documents or records. Similar to the simple Python application showed in this page, it uses the `}<inlineCode parentName=\"p\">{`pymongo`}</inlineCode>{` package to connect to the DB and insert all the documents.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\",\n        \"metastring\": \"path=app/import.py\",\n        \"path\": \"app/import.py\"\n      }}>{`from pymongo import MongoClient\nimport json\nimport os\n\nmongodb_uri = os.environ.get('APP_MONGODB_URI')\nif not mongodb_uri:\n    mongodb_uri = 'mongodb://localhost/moviedb'\n\nclient = MongoClient(mongodb_uri,\n                     ssl=True,\n                     ssl_ca_certs=\"/app/db_certificate.cert\")\n\ndbnames = client.list_database_names()\n\nif not 'moviedb' in dbnames:\n    db = client['moviedb']\n    movies = db['movie']\n    with open('./db.json') as f:\n        data = json.load(f)\n    movies.insert_many(data['movies'])\n\nclient.close()\n`}</code></pre>\n    <p>{`Last but not least, the `}<inlineCode parentName=\"p\">{`requirements.txt`}</inlineCode>{` file with the Python packages required for this demo.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\",\n        \"metastring\": \"path=app/requirements.txt\",\n        \"path\": \"app/requirements.txt\"\n      }}>{`flask\nflask-restful\nflask-mongoengine\npymongo\n`}</code></pre>\n    <h2>{`Clean up`}</h2>\n    <p>{`Finally, when you finish using the infrastructure for any of the presented examples, cleanup everything you created with the execution of:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`terraform destroy\n`}</code></pre>\n    <p>{`If the example was created with IBM Cloud Schematics, cleanup everything you created with the execution of:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`\nibmcloud schematics destroy --id $WORKSPACE_ID # Identify the Activity_ID\nibmcloud schematics logs  --id $WORKSPACE_ID --act-id Activity_ID\n\n# ... wait until it's done\n\nibmcloud schematics workspace delete --id $WORKSPACE_ID\nibmcloud schematics workspace list\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}