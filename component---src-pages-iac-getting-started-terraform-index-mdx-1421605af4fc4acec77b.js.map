{"version":3,"sources":["webpack:///./src/pages/iac/getting-started-terraform/index.mdx"],"names":["_frontmatter","makeShortcode","name","props","console","warn","PageDescription","AnchorLinks","AnchorLink","GatsbyLink","InlineNotification","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","small","parentName","to","className","focusable","preserveAspectRatio","width","height","viewBox","aria-hidden","d","kind","isMDXComponent"],"mappings":"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","file":"component---src-pages-iac-getting-started-terraform-index-mdx-1421605af4fc4acec77b.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/isaias/Documents/Projects/Developer_Advocate_Group/CODE_PATTERNS/ibm-asean-enterprise-cloud-patterns/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst PageDescription = makeShortcode(\"PageDescription\");\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst GatsbyLink = makeShortcode(\"GatsbyLink\");\nconst InlineNotification = makeShortcode(\"InlineNotification\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    {\n      /*\n      The pattern to document the resources is like follow:\n      - Introduce the resource with an example\n      - List all or the most important input parameters\n      - If will be used, list the most important output parameters\n      - Provide instructions to get the value of the input parameters, either using `ibmcloud`, API or the Web console.\n      - If needed, instructions to execute the code either with Terraform or Schematics\n      */\n    }\n    <PageDescription mdxType=\"PageDescription\">\n      <p>{`Learn the basics of Infrastructure as Code with Terraform on IBM Cloud`}</p>\n    </PageDescription>\n    <p>{`After you have configured and verified Terraform and the IBM Cloud provider, this section will go through a step-by-step example of creating a resource on IBM Cloud using the provider. It covers how to create a virtual server from scratch. To do this, there is example terraform code to create a vpc and subnet, add a virtual server to the vpc, configure an access list and expose the virtual server on the Internet, and then access it over ssh. If you are an experienced Terraform user, you may skim through this section and simply note the resource types and parameters used in each step.`}</p>\n    <AnchorLinks small mdxType=\"AnchorLinks\">\n  <AnchorLink mdxType=\"AnchorLink\">Deploy a single instance</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">“Hello World” from IBM Cloud</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Terraform State</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Exposing the service to the world in a secure manner</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Deploy a configurable server</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">SSH Access</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Final Terraform code</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Clean up</AnchorLink>\n    </AnchorLinks>\n    <h2>{`Deploy a single instance`}</h2>\n    <p>{`The first step to use Terraform with IBM Cloud is to configure the provider. Lets start creating a directory to store the “Hello World” project.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`mkdir hello_world_terraform_ibm\ncd hello_world_terraform_ibm\n`}</code></pre>\n    <p>{`Remember to export in the terminal or console the variable `}<inlineCode parentName=\"p\">{`IC_API_KEY`}</inlineCode>{` with the IBM Cloud API key as shown in the `}<GatsbyLink to=\"/iac/setup-environment#configure-access-to-ibm-cloud\" mdxType=\"GatsbyLink\">{`Environment Setup`}</GatsbyLink>{`.`}</p>\n    <p>{`The Terraform code can be done with JSON format or using `}<strong parentName=\"p\">{`HashiCorp Configuration Language`}</strong>{` (HCL). During this pattern guide we’ll use only HCL and we will call it HCL or Terraform Code.`}</p>\n    <p>{`The Terraform code can be done with JSON format or using `}<strong parentName=\"p\">{`HashiCorp Configuration Language`}</strong>{` (HCL). During this pattern guide we’ll use only HCL and we will call it HCL or Terraform Code.`}</p>\n    <p>{`Create the file `}<inlineCode parentName=\"p\">{`main.tf`}</inlineCode>{` with the `}<inlineCode parentName=\"p\">{`provider`}</inlineCode>{` block.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\"\n      }}>{`provider \"ibm\" {\n  generation         = 2\n  region             = \"us-south\"\n}\n`}</code></pre>\n    <p>{`We will be working with VPC Infrastructure Gen 2, the provider accepts the following common input parameters:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Input parameter`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`generation`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the generation of IBM Cloud VPC Infrastructure, in this case it’ll be `}<inlineCode parentName=\"td\">{`2`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`region`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the region where you want to create the VPC resources, examples: `}<inlineCode parentName=\"td\">{`us-south`}</inlineCode>{` or `}<inlineCode parentName=\"td\">{`us-east`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`ibmcloud_api_key`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the IBM Cloud API key. However we recommend to enter this parameter with the environment variable `}<inlineCode parentName=\"td\">{`IC_API_KEY`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`To find all the available regions with IBM Cloud CLI you can use the `}<inlineCode parentName=\"p\">{`is`}</inlineCode>{` sub-command (for more information on installing this plugin refer to `}<a parentName=\"p\" {...{\n        \"href\": \"/att-cloudnative/ibmcloud-pattern-guide/iac/setup-environment\"\n      }}>{`Setup Environment`}</a>{`):`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`ibmcloud is regions\n`}</code></pre>\n    <p>{`Now execute the terraform sub-commands `}<inlineCode parentName=\"p\">{`init`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`plan`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`terraform init\nterraform plan\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`init`}</inlineCode>{` sub-command downloads all the terraform components needed to execute or apply the terraform code, in this simple example it does not need to download any, the only component we need is the IBM Cloud provider and it is already installed. You’ll see there is a new `}<inlineCode parentName=\"p\">{`.terraform`}</inlineCode>{` directory, this is where terraform will store all the required components for your terraform project.`}</p>\n    <p>{`The output of `}<inlineCode parentName=\"p\">{`plan`}</inlineCode>{` shows the resources that will be created, updated and deleted, in this case terraform won’t do anything.`}</p>\n    <p>{`To create a VM or instance we use the resource `}<inlineCode parentName=\"p\">{`ibm_is_instance`}</inlineCode>{` but in order to have an instance you first need the networking resources to build the instance on top of it.`}</p>\n    <p>{`On IBM Cloud there is no VPC created by default, you will need to create your VPC using the `}<inlineCode parentName=\"p\">{`ibm_is_vpc`}</inlineCode>{` resource. Then we’ll need a subnet on that VPC, the subnets are created with the resource `}<inlineCode parentName=\"p\">{`ibm_is_subnet`}</inlineCode>{`.`}</p>\n    <InlineNotification mdxType=\"InlineNotification\">\n      <h6>{`Resources naming convention`}</h6>\n      <p>{`In case you haven’t noticed yet, the IBM Cloud resources begin with `}<inlineCode parentName=\"p\">{`ibm_`}</inlineCode>{`, the `}<inlineCode parentName=\"p\">{`is_`}</inlineCode>{` stands for Internet Service.`}</p>\n    </InlineNotification>\n    <p>{`The Terraform code to create the VPC and the Subnet is as follows:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\"\n      }}>{`resource \"ibm_is_vpc\" \"iac_test_vpc\" {\n  name = \"terraform-test-vpc\"\n  tags = [ \"iac-terraform-test\" ]\n}\n\nresource \"ibm_is_subnet\" \"iac_test_subnet\" {\n  name            = \"terraform-test-subnet\"\n  vpc             = ibm_is_vpc.iac_test_vpc.id\n  zone            = \"us-south-1\"\n  tags = [ \"iac-terraform-test\" ]\n}\n`}</code></pre>\n    <p>{`The most important input parameters to create the VPC and the Subnet are listed below.`}</p>\n    <p>{`For the `}<inlineCode parentName=\"p\">{`ibm_is_vpc`}</inlineCode>{` resource:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Input parameter`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`name`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`to name the VPC`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`resource_group`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the ID of the resource group for the VPC, the default resource group is `}<inlineCode parentName=\"td\">{`default`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`tags`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`tags to associate with your VPC, they will help you to find the VPC more easily. Separate multiple tags with a comma`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`For the `}<inlineCode parentName=\"p\">{`ibm_is_subnet`}</inlineCode>{` resource:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Input parameter`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`name`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`to name the Subnet`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`vpc`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the ID of the VPC, use the resource name with `}<inlineCode parentName=\"td\">{`.id`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`zone`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the subnet zone name`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`resource_group`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the ID of the resource group for the Subnet`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`tags`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`tags to associate with your Subnet, they will help you to find it more easily. Separate multiple tags with a comma`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`The IBM Cloud virtual server instance is created with the resource `}<inlineCode parentName=\"p\">{`ibm_is_instance`}</inlineCode>{`, a basic terraform code to create an instance would be like so:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\"\n      }}>{`resource \"ibm_is_instance\" \"iac_test_instance\" {\n  name    = \"terraform-test-instance\"\n  image   = \"r006-14140f94-fcc4-11e9-96e7-a72723715315\"\n  profile = \"cx2-2x4\"\n\n  primary_network_interface {\n    name   = \"eth1\"\n    subnet = ibm_is_subnet.iac_test_subnet.id\n  }\n\n  vpc  = ibm_is_vpc.iac_test_vpc.id\n  zone = \"us-south-1\"\n  keys = []\n\n  tags = [ \"iac-terraform-test\" ]\n}\n`}</code></pre>\n    <p>{`Some of the most important input parameters are:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Input parameter`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`name`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`to name the new instance`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`image`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the ID of the virtual server image to use for the instance`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`profile`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`name of the profile to use for your instance`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`vpc`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the ID of the VPC where you want to create the instance`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`zone`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`name of the VPC zone to create the instance`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`keys`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`a comma separated list of SSH keys that you want to add to your instance`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`primary_network_interface.subnet`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the ID of the subnet. Only one primary network interface can be specified for an instance`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`tags`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`a list of tags to add to your instance. Tags can help you find your instance`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`user_data`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`user data to transfer to the instance`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <InlineNotification mdxType=\"InlineNotification\">\n      <h6>{`VPC Networking and Virtual Servers`}</h6>\n      <p>{`Check the documentation to know more about `}<a parentName=\"p\" {...{\n          \"href\": \"https://cloud.ibm.com/docs/vpc?topic=vpc-about-networking-for-vpc\"\n        }}>{`Networking for VPC`}</a>{` and `}<a parentName=\"p\" {...{\n          \"href\": \"https://cloud.ibm.com/docs/vpc?topic=vpc-about-advanced-virtual-servers\"\n        }}>{`Virtual Servers`}</a>{`.`}</p>\n    </InlineNotification>\n    <p>{`To list all the available images and profiles we will use `}<inlineCode parentName=\"p\">{`ibmcloud is`}</inlineCode>{`, specify the `}<strong parentName=\"p\">{`Gen 2`}</strong>{` platform before running the command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`ibmcloud is target --gen 2        # this is a one time execution only, unless you swap to gen 1\nibmcloud is instance-profiles\nibmcloud is images\n`}</code></pre>\n    <p>{`That’s a lot of images, to narrow our search let’s filter the output to get the available images for `}<inlineCode parentName=\"p\">{`Ubuntu 18.4`}</inlineCode>{` (`}<inlineCode parentName=\"p\">{`LTS Bionic`}</inlineCode>{`) and for `}<inlineCode parentName=\"p\">{`amd64`}</inlineCode>{` architecture using regular *nix commands or with `}<inlineCode parentName=\"p\">{`jq`}</inlineCode>{`, if you have `}<inlineCode parentName=\"p\">{`jq`}</inlineCode>{` installed (`}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/stedolan/jq/wiki/Installation\"\n      }}>{`how to install jq`}</a>{`):`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`ibmcloud is images | grep available | grep ubuntu-18 | grep amd64 | cut -f1 -d\" \"\n\nibmcloud is images --json | jq -r '.[] | select(.status==\"available\" and .operating_system.name==\"ubuntu-18-04-amd64\").id'\n`}</code></pre>\n    <p>{`Repeating for the instance profiles searching just the `}<inlineCode parentName=\"p\">{`amd64`}</inlineCode>{` architecture with the minimum CPU and Memory to get the lowest cost.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`ibmcloud is instance-profiles | grep amd64 | sort -k4 -k5 -n | head -1 | cut -f1 -d\" \"\n\nibmcloud is instance-profiles --json | jq -r 'map(select(.vcpu_architecture.value==\"amd64\")) | sort_by(.memory.value)[0].name'\n`}</code></pre>\n    <p>{`Notice that in the terraform code there are no `}<inlineCode parentName=\"p\">{`keys`}</inlineCode>{` this is because the instance will be used only to start a web service, and we are not going to ssh to the instance at this time.`}</p>\n    <p>{`You can use `}<inlineCode parentName=\"p\">{`user_data`}</inlineCode>{` to run common configuration tasks when your instance starts. For example, you can specify cloud-init directives or shell scripts for Linux images. You will see an example of using the `}<inlineCode parentName=\"p\">{`user_data`}</inlineCode>{` parameter in the next session.`}</p>\n    <p>{`Add to the `}<inlineCode parentName=\"p\">{`main.tf`}</inlineCode>{` file the terraform code for the vpc, subnet and instance. Now, if you execute `}<inlineCode parentName=\"p\">{`terraform plan`}</inlineCode>{` it shows the resources that will be created, updated and deleted. In this case terraform will create 3 resources: the VPC, the subnet and the instance.`}</p>\n    <p>{`Everything is ready now to get that instance in the cloud, just execute the terraform `}<inlineCode parentName=\"p\">{`apply`}</inlineCode>{` sub-command and wait about 10 to 60 seconds.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`terraform apply\n`}</code></pre>\n    <InlineNotification mdxType=\"InlineNotification\">\n      <h6>{`Can I make it non-interactive?`}</h6>\n      <p>{`Terraform will ask for confirmation before applying the changes in the terraform code. To skip this confirmation and directly apply the changes use the parameter `}<inlineCode parentName=\"p\">{`-auto-approve`}</inlineCode>{`.`}</p>\n      <p>{`This parameter can also be used with the `}<inlineCode parentName=\"p\">{`destroy`}</inlineCode>{` sub-command explained below.`}</p>\n    </InlineNotification>\n    <h2>{`“Hello World” from IBM Cloud`}</h2>\n    <p>{`There is an instance created but it does nothing and you can’t do anything with that instance. Make this instance start a Web server with a “Hello World” page by adding a short script in the `}<inlineCode parentName=\"p\">{`user_data`}</inlineCode>{` parameter. Now, the `}<inlineCode parentName=\"p\">{`ibm_is_instance`}</inlineCode>{` resource will look like:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\"\n      }}>{`resource \"ibm_is_instance\" \"iac_test_instance\" {\n  name    = \"terraform-test-instance\"\n  image   = \"r006-14140f94-fcc4-11e9-96e7-a72723715315\"\n  profile = \"cx2-2x4\"\n\n  primary_network_interface {\n    name   = \"eth1\"\n    subnet = ibm_is_subnet.iac_test_subnet.id\n  }\n\n  vpc  = ibm_is_vpc.iac_test_vpc.id\n  zone = \"us-south-1\"\n  keys = []\n\n  user_data = <<-EOUD\n              #!/bin/bash\n              echo \"Hello World\" > index.html\n              nohup busybox httpd -f -p 8080 &\n              EOUD\n\n  tags = [ \"iac-terraform-test\" ]\n}\n`}</code></pre>\n    <p>{`When the instance is up and running we need to know the IP address. You could go to the IBM Cloud console and get it from there, however, there is a more effective way to get the IP address with terraform: use the `}<inlineCode parentName=\"p\">{`output`}</inlineCode>{` directive.`}</p>\n    <p>{`Add the following code to your `}<inlineCode parentName=\"p\">{`main.tf`}</inlineCode>{` file:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\"\n      }}>{`output \"ip_address\" {\n  value = ibm_is_instance.iac_test_instance.primary_network_interface[0].primary_ipv4_address\n}\n`}</code></pre>\n    <p>{`The beauty of Terraform is that you don’t have to destroy everything and re-create it for every change, the provider will update all the resources that can be updated and re-create those that don’t support an update. In this case, the instance has to be re-created because of the `}<inlineCode parentName=\"p\">{`user_data`}</inlineCode>{`, but the VPC and subnet will remain intact, as they were not modified. So, to re-apply the changes just execute `}<inlineCode parentName=\"p\">{`apply`}</inlineCode>{` again:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`terraform apply\n`}</code></pre>\n    <p>{`When terraform complete the task, it prints the IP address of the instance. If you need it again, just execute `}<inlineCode parentName=\"p\">{`terraform output ip_address`}</inlineCode>{`.`}</p>\n    <p>{`To view what you have created on the IBM Cloud console, go to the `}<strong parentName=\"p\">{`Navigation Menu`}</strong>{` (`}<svg className=\"btn-inactive\" focusable=\"false\" preserveAspectRatio=\"xMidYMid meet\" width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" aria-hidden=\"true\"><path d=\"M2 14.8H18V16H2zM2 11.2H18V12.399999999999999H2zM2 7.6H18V8.799999999999999H2zM2 4H18V5.2H2z\"></path></svg>{`) >> `}<strong parentName=\"p\">{`VPC Infrastructure`}</strong>{`, then select `}<strong parentName=\"p\">{`Network`}</strong>{` >> `}<strong parentName=\"p\">{`VPCs`}</strong>{`, `}<strong parentName=\"p\">{`Subnets`}</strong>{` and `}<strong parentName=\"p\">{`Compute`}</strong>{` >> `}<strong parentName=\"p\">{`Virtual server instances`}</strong>{` to view all the resources you have created.`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"483px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"161.80555555555554%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAgCAIAAACdAM/hAAAACXBIWXMAABYlAAAWJQFJUiTwAAAD80lEQVQ4y31USU8bSRjtP4GSE6d4ELKDFIgYzkj8nUQKdw4gkMI/4MARhEAQiWHMKYhRbDCLIEbjEE0kbOx2u5fqvd2bjZlXVbZpHCcP1O6lXn3Le18Js7Ozc3Nzb95MTk29nZycTKfTqVTqDwbcZDKZmZmZPxOY6WF6eloYGxvDCiydmJiYejuVSr0aGRl5+fIFx+joaDqN75k0++neZjKvX0+Mj48LNaBaLZX+vbm5+cqAm2IRl5urq6u1tbX379/Nz89/+Al4Kdi2bejEMk1d14MgfGTodDq4ep53cHCwvLy8urr6cRiEKIps29INw8IGphlFMWgPDw+4qqq6tbW1uLi4srKyPAxCHMcgS40G0TSs9rxmn0wI2d7e/h35cRh42pqm7ezsgPnLtC3LUhUFkRUGWZbrddEwDE5G2gsLC0tLS4sMS88hNJs+LdayDMM0DcN2HHShFdPKsdHR0RF6ls1m/6Y4+CuB/f19wXVdomu0V4apyAqu/bSrDHEUYVvXcXg7kqBSIT3kqahqEASM2SXDAZVKOQxDrHE9Dxk9JIA1guM4hJF13XBct5NoGCe7jqupCur6ua80MhoGhyj0ajDWMzIhel2siaIYhNEgGTo7tt1oNOqi6LoeXrXbba4zJZfL2ChutfibvpB8dwELwzBA/Kbvg/X4PG00rN1qoy5NI8gO1cVMCL5GQMx/jo93d3ez2cPz8/MzhtvbW9/3kSrG4+LiIp/PXV5eYmYwKng8OzvHpjTy+vr6xsYGXlFmoXBaKORyub29PciLyJubm6enp5LU8Dy3SeFJUv3b7ffDw0M8CEjo+vq6AM6XL/Q/lzs5OSkWi9Af5FKplM/nYYjPn48Q9pIBX+EfGjlkgLdUVVFpbRoeeVW8ZrRKUVSZ+ddh/nvqNiJgmuAvTaV/mKQgDPvdLpfLSM9gA4uEfT/gM8cXwNtNnRBVI3QkUFxDsm2n04tcrpSxDtF4/wd1xnEBcyGgYRpRDCNH0LkrlSje3d2hVYgM57ZaLW6BJ3vSrHRdZQ4dmGdEhlpIWCNk6NjTyCY7wNAzWVGq1ZrVszEscMwACfL5k2qt1t+3S0Y+dCqRNhquKL3BoivQ5E+f9iAphMQ0Q6pBMoyJsCgaF1lu8AM0aU/0EN758eO/ph8MIePsAZvqTPSBmiEVtMXBiK0lSRoYTJq2TU9dA65HP5Pker1eua+g2zhXiY66dDgh6FmoS0aHWOKECwBwD0AIfMIZhKQIg6pqaPATuT+c3DqdHvAIn2Kpw+pS4E9Zdhw3WbaAMvCtcn+POAMyIqmm50Ew1DxwDHTJsBSqsiw0zvaZTkkyVMQY4mRGTKDfFI7/AfEgV7VM81YfAAAAAElFTkSuQmCC')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"IBM Cloud Resources\",\n        \"title\": \"IBM Cloud VPC Resources\",\n        \"src\": \"/att-cloudnative/ibmcloud-pattern-guide/static/e0edee4bcc7601b67ee38f27066c7d2c/6fe6f/vpc-resources.png\",\n        \"srcSet\": [\"/att-cloudnative/ibmcloud-pattern-guide/static/e0edee4bcc7601b67ee38f27066c7d2c/7fc1e/vpc-resources.png 288w\", \"/att-cloudnative/ibmcloud-pattern-guide/static/e0edee4bcc7601b67ee38f27066c7d2c/6fe6f/vpc-resources.png 483w\"],\n        \"sizes\": \"(max-width: 483px) 100vw, 483px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <h2>{`Terraform State`}</h2>\n    <p>{`You may have noticed that every time you run `}<inlineCode parentName=\"p\">{`terraform apply`}</inlineCode>{` there is a new or updated file named `}<inlineCode parentName=\"p\">{`terraform.tfstate`}</inlineCode>{`. This file is the Terraform State file and it store information about the infrastructure created. All the resources and variables are in that file.`}</p>\n    <p>{`This file is in JSON format and it has a private API, it changes (or may change) every time there is a new Terraform version, so you can read it but it’s not recommended to use it to get data from it. Instead, use the `}<inlineCode parentName=\"p\">{`output`}</inlineCode>{` variables and the `}<inlineCode parentName=\"p\">{`output`}</inlineCode>{` Terraform command.`}</p>\n    <p>{`Every time you run Terraform it fetch the latest status of every resource in the code and compare it with the state from the `}<inlineCode parentName=\"p\">{`terraform.tfstate`}</inlineCode>{` file to determine what changes need to be applied.`}</p>\n    <InlineNotification kind=\"warning\" mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`Do not delete the terraform.tfstate file`}</strong></p>\n      <p>{`If you delete it the next time you want to modify your infrastructure terraform will not know the current state and will complain saying that the resources you want to create already exist.`}</p>\n    </InlineNotification>\n    <p>{`For a simple and personal project is fine to have the Terraform state in a local file. Sometimes it’s stored in a version control system (i.e. GitHub) however this is not recommended because the state file contain sensitive information that should not be exposed.`}</p>\n    <InlineNotification kind=\"warning\" mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`Do not commit the state file to GitHub`}</strong></p>\n      <p>{`Do Not store the `}<inlineCode parentName=\"p\">{`terraform.tfstate`}</inlineCode>{` in your GitHub repository, it may contain sensitive information such as passwords or ssh keys. Make sure the `}<inlineCode parentName=\"p\">{`terraform.tfstate`}</inlineCode>{` and backup `}<inlineCode parentName=\"p\">{`terraform.tfstate.backup`}</inlineCode>{` filenames are in the `}<inlineCode parentName=\"p\">{`.gitignore`}</inlineCode>{` file.`}</p>\n    </InlineNotification>\n    <p>{`For enterprise projects or if a team is working with the same Terraform code make it’s recommended to use a remote state in a shared storage. The most common options to implement remote state is to use a Terraform Backend or use a service such as Terraform Enterprise, Terraform Cloud or IBM Cloud Schematics.`}</p>\n    <p>{`The setup and use of Terraform backends is explained in the `}<a parentName=\"p\" {...{\n        \"href\": \"/att-cloudnative/ibmcloud-pattern-guide/iac/getting-started-terraform/remote-state\"\n      }}>{`Setup Terraform Remote State using etcd as backend`}</a>{` section. The use of IBM Cloud Schematics is explained in the next section `}<a parentName=\"p\" {...{\n        \"href\": \"/att-cloudnative/ibmcloud-pattern-guide/iac/schematics\"\n      }}>{`IBM Cloud Schematics`}</a></p>\n    <h2>{`Exposing the service to the world in a secure manner`}</h2>\n    <p>{`Now the instance is running and possibly it’s serving a web page with Hello World but unfortunately you can’t see it. You can’t see it because (1) the IP address is private, internal to the IBM Cloud network and (2) there aren’t any firewall rules to allow access to the instance. Resolve that by adding a `}<inlineCode parentName=\"p\">{`ibm_is_floating_ip`}</inlineCode>{`, a `}<inlineCode parentName=\"p\">{`ibm_is_security_group_rule`}</inlineCode>{` and a few `}<inlineCode parentName=\"p\">{`ibm_is_security_group`}</inlineCode>{` resources:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\"\n      }}>{`resource \"ibm_is_floating_ip\" \"iac_test_floating_ip\" {\n  name   = \"terraform-test-ip\"\n  target = ibm_is_instance.iac_test_instance.primary_network_interface.0.id\n  tags   = [ \"iac-terraform-test\" ]\n}\n\nresource \"ibm_is_security_group\" \"iac_test_security_group\" {\n  name = \"terraform-test-sg-public\"\n  vpc  = ibm_is_vpc.iac_test_vpc.id\n}\n\nresource \"ibm_is_security_group_rule\" \"iac_test_security_group_rule_tcp_http\" {\n  group     = ibm_is_security_group.iac_test_security_group.id\n  direction = \"inbound\"\n  tcp {\n      port_min = 8080\n      port_max = 8080\n  }\n}\n`}</code></pre>\n    <p>{`Then add the new security group to the `}<inlineCode parentName=\"p\">{`primary_network_interface`}</inlineCode>{` of the instance, so it looks like so:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\"\n      }}>{`resource \"ibm_is_instance\" \"iac_test_instance\" {\n  ...\n  primary_network_interface {\n    name   = \"eth1\"\n    subnet = ibm_is_subnet.iac_test_subnet.id\n    security_groups = [ ibm_is_security_group.iac_test_security_group.id ]\n  }\n  ...\n}\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`ibm_is_floating_ip`}</inlineCode>{` resource creates a floating IP address that can be used to access the targeted instance from the public network.`}</p>\n    <p>{`The main input parameters are:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Input parameter`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`name`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`to name the floating IP address`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`resource_group`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the ID of the resource group for the floating IP, the default resource group is `}<inlineCode parentName=\"td\">{`default`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`tags`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`tags to associate with your floating IPs, they will help you to find them more easily. Separate multiple tags with a comma`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`The most important output parameter is:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Output parameter`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`address`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the floating IP address`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`The `}<inlineCode parentName=\"p\">{`ibm_is_security_group`}</inlineCode>{` resource allows you to create a virtual firewall with rules to control the inbound and outbound traffic. These rules are created with the resource `}<inlineCode parentName=\"p\">{`ibm_is_security_group_rule`}</inlineCode>{`.`}</p>\n    <p>{`The most important input parameters for `}<inlineCode parentName=\"p\">{`ibm_is_security_group`}</inlineCode>{` are:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Input parameter`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`name`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`to name the Security Group`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`vpc`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the VPC ID for the Security Group. Use the `}<inlineCode parentName=\"td\">{`id`}</inlineCode>{` output parameter of the selected `}<inlineCode parentName=\"td\">{`ibm_is_vpc`}</inlineCode>{` resource.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`resource_group`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the ID of the resource group to create the Security Group there`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`After it’s created you can access all the rules in the security group with the following output parameters:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Output parameter`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`id`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the Security Group ID`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`rules`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`a nested block describing the rules of this security group`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`rules.direction`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the direction of the traffic either `}<inlineCode parentName=\"td\">{`inbound`}</inlineCode>{` or `}<inlineCode parentName=\"td\">{`outbound`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`rules.protocol`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the type of the protocol `}<inlineCode parentName=\"td\">{`all`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`icmp`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`tcp`}</inlineCode>{` or `}<inlineCode parentName=\"td\">{`udp`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`rules.port_max`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the inclusive upper bound of TCP/UDP port range`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`rules.port_min`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the inclusive lower bound of TCP/UDP port range`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`The `}<inlineCode parentName=\"p\">{`primary_network_interface`}</inlineCode>{` of the instance and each `}<inlineCode parentName=\"p\">{`ibm_is_security_group_rule`}</inlineCode>{` will reference the new security group using the `}<inlineCode parentName=\"p\">{`id`}</inlineCode>{` output parameter.`}</p>\n    <p>{`Each `}<inlineCode parentName=\"p\">{`ibm_is_security_group_rule`}</inlineCode>{` defines a traffic rule either for inbound or outbound direction. The most important input parameters are:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Input parameter`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`group`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the Security Group ID`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`direction`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`direction of the traffic either `}<inlineCode parentName=\"td\">{`inbound`}</inlineCode>{` or `}<inlineCode parentName=\"td\">{`outbound`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`tcp`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`a nested block describing the `}<inlineCode parentName=\"td\">{`tcp`}</inlineCode>{` protocol of this security group rule`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`tcp.port_min`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the inclusive lower bound of TCP port range`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`tcp.port_max`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the inclusive upper bound of TCP port range`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`udp`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`a nested block describing the `}<inlineCode parentName=\"td\">{`udp`}</inlineCode>{` protocol of this security group rule`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`udp.port_min`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the inclusive lower bound of UDP port range`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`udp.port_max`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the inclusive upper bound of UDP port range`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`In addition to the protocols `}<inlineCode parentName=\"p\">{`tcp`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`udp`}</inlineCode>{` security group rules recognize `}<inlineCode parentName=\"p\">{`icmp`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`ALL`}</inlineCode>{`.`}</p>\n    <p>{`Having now a public IP address and the port 8080 open to inbound traffic to the instance, we can access the Web service. Change the `}<inlineCode parentName=\"p\">{`ip_address`}</inlineCode>{` output variable to:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\"\n      }}>{`output \"ip_address\" {\n  value = ibm_is_floating_ip.iac_test_floating_ip.address\n}\n`}</code></pre>\n    <p>{`Apply the changes again and execute the following line to view the output of the published web page:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`$ curl \"http://$(terraform output ip_address):8080\"\nHello World\n`}</code></pre>\n    <InlineNotification mdxType=\"InlineNotification\">\n      <h6>{`Endpoint output variable`}</h6>\n      <p>{`Notice the use of the terraform output command to get the value of the variable `}<inlineCode parentName=\"p\">{`ip_address`}</inlineCode>{`. In the same way you can create an output variable named, for example `}<inlineCode parentName=\"p\">{`endpoint`}</inlineCode>{`, to contain the address for the Web server.`}</p>\n      <p>{`So, the command to get the web page would be: `}<inlineCode parentName=\"p\">{`curl $(terraform output endpoint)`}</inlineCode></p>\n    </InlineNotification>\n    <h2>{`Deploy a configurable server`}</h2>\n    <p>{`The web server is serving on port 8080 but this port has to be set in the security group and the user data configuration. If we decide to change the port in the user data it may be possible to forget to change it in the other security group or vice versa.`}</p>\n    <p>{`To make this code more DRY and configurable let’s define an input variable for the port, like so:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\"\n      }}>{`variable \"port\" {\n  default = 8080\n}\n`}</code></pre>\n    <p>{`We can provide the value of this variable in the following ways, where the earlier option takes precedence over the later:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`With the `}<inlineCode parentName=\"li\">{`-var`}</inlineCode>{` command line option of `}<inlineCode parentName=\"li\">{`terraform`}</inlineCode></li>\n      <li parentName=\"ol\">{`In variable definitions files (`}<inlineCode parentName=\"li\">{`.tfvars`}</inlineCode>{`) such as `}<inlineCode parentName=\"li\">{`terraform.tfvars`}</inlineCode></li>\n      <li parentName=\"ol\">{`As environment variables starting with `}<inlineCode parentName=\"li\">{`TF_VAR_`}</inlineCode></li>\n      <li parentName=\"ol\">{`Default value in the variable definition`}</li>\n    </ol>\n    <p>{`So, if we want a port other than `}<inlineCode parentName=\"p\">{`8080`}</inlineCode>{` just use the parameter `}<inlineCode parentName=\"p\">{`-var`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`terraform apply -var=\"port=8081\"\n`}</code></pre>\n    <p>{`To use the variable in the code, just replace the `}<inlineCode parentName=\"p\">{`8080`}</inlineCode>{` by `}<inlineCode parentName=\"p\">{`var.port`}</inlineCode>{` or, in case we want to interpolate the variable in a string, we use `}<inlineCode parentName=\"p\">{`\\${var.port}`}</inlineCode>{`. So the changes in the code look like this:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\"\n      }}>{`resource \"ibm_is_instance\" \"iac_test_instance\" {\n  ...\n  user_data = <<-EOUD\n              #!/bin/bash\n              echo \"Hello World\" > index.html\n              nohup busybox httpd -f -p \\${var.port} &\n              EOUD\n  ...\n}\n\nresource \"ibm_is_security_group_rule\" \"iac_test_security_group_rule_tcp_http\" {\n  ...\n  tcp {\n      port_min = var.port\n      port_max = var.port\n  }\n}\n`}</code></pre>\n    <p>{`Now, execute `}<inlineCode parentName=\"p\">{`terraform apply`}</inlineCode>{` using the port `}<inlineCode parentName=\"p\">{`8081`}</inlineCode>{`. Notice that this will re-create the instance and update the other resources.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`terraform apply -var=\"port=8081\"\ncurl \"http://$(terraform output ip_address):8081\"\n`}</code></pre>\n    <p>{`Alternatively, using environment variables would look like this:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`export TF_VAR_port=8082\nterraform apply\ncurl \"http://$(terraform output ip_address):\\${TF_VAR_port}\"\n`}</code></pre>\n    <h2>{`SSH Access`}</h2>\n    <p>{`We accomplished the initial requirements having the Web service running and printing the “Hello World” but what if we want to have SSH access to the instance?`}</p>\n    <p>{`Open the `}<inlineCode parentName=\"p\">{`main.tf`}</inlineCode>{` file to add the resources `}<inlineCode parentName=\"p\">{`ibm_is_ssh_key`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`ibm_is_security_group_rule`}</inlineCode>{` to open port `}<inlineCode parentName=\"p\">{`22`}</inlineCode>{` to allow SSH access to the instance.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\"\n      }}>{`variable \"public_key_file\"  { default = \"~/.ssh/id_rsa.pub\" }\nlocals {\n  public_key    = \"\\${file(pathexpand(var.public_key_file))}\"\n}\n\nresource \"ibm_is_security_group_rule\" \"iac_test_security_group_rule_tcp_ssh\" {\n  group = ibm_is_security_group.iac_test_security_group.id\n  direction = \"inbound\"\n  tcp {\n      port_min = 22\n      port_max = 22\n  }\n}\n\nresource \"ibm_is_ssh_key\" \"iac_test_key\" {\n  name       = \"terraform-test-key\"\n  public_key = local.public_key\n  tags       = [ \"iac-terraform-test\" ]\n}\n`}</code></pre>\n    <p>{`This SSH Key has to be linked to the instance through the `}<inlineCode parentName=\"p\">{`keys`}</inlineCode>{` parameter, so replace the `}<inlineCode parentName=\"p\">{`keys = []`}</inlineCode>{` parameter in the instance `}<inlineCode parentName=\"p\">{`iac_test_instance`}</inlineCode>{` for:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\"\n      }}>{`  keys = [ ibm_is_ssh_key.iac_test_key.id ]\n`}</code></pre>\n    <p>{`The resource `}<inlineCode parentName=\"p\">{`ibm_is_ssh_key`}</inlineCode>{` creates a SSH key to access a Gen 2 instance. It requires the following input parameters:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Input parameter`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`name`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the name of the key`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`public_key`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the content of the public key`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`resource_group`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`an optional ID of the resource group for the key`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`tags`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`optional tags to associate with your key, they will help you to find it more easily. Separate multiple tags with a comma`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`Instead of passing to Terraform the content of the public key, this code takes the public key filename in the variable `}<inlineCode parentName=\"p\">{`public_key_file`}</inlineCode>{` either as a parameter `}<inlineCode parentName=\"p\">{`-var=\"public_key_file=FILENAME\"`}</inlineCode>{` or as an environment variable `}<inlineCode parentName=\"p\">{`TF_VAR_public_key_file=FILENAME`}</inlineCode>{` and places the file content into the local variable `}<inlineCode parentName=\"p\">{`public_key`}</inlineCode>{` which will be used by the IBM Cloud provider to create a SSH Key resource. If no parameter is given for the public key filename, the default value is set to the well known default filename for RSA public keys: `}<inlineCode parentName=\"p\">{`~/.ssh/id_rsa.pub`}</inlineCode>{`.`}</p>\n    <InlineNotification mdxType=\"InlineNotification\">\n      <h6>{`How to create the a key pair?`}</h6>\n      <p>{`To have access to the instances you need a private and public key. You can use the `}<inlineCode parentName=\"p\">{`ssh-keygen`}</inlineCode>{` command on Linux or Mac OS X to generate them. Just execute the command `}<inlineCode parentName=\"p\">{`ssh-keygen`}</inlineCode>{` and follow the instructions. You can read more about SSH Keys in the `}<a parentName=\"p\" {...{\n          \"href\": \"https://cloud.ibm.com/docs/infrastructure/ssh-keys?topic=ssh-keys-getting-started-tutorial\"\n        }}>{`IBM Cloud docs`}</a>{`.`}</p>\n    </InlineNotification>\n    <p>{`After applying the changes with `}<inlineCode parentName=\"p\">{`terraform apply`}</inlineCode>{` you can access to the instance with SSH either to login or execute remote commands. For example, use the following command to remotely execute `}<inlineCode parentName=\"p\">{`echo 'Hello World'`}</inlineCode>{` using the private key `}<inlineCode parentName=\"p\">{`~/.ssh/id_rsa`}</inlineCode></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`$ ssh -i ~/.ssh/id_rsa ubuntu@$(terraform output ip_address) \"echo 'Hello World'\"\nHello World\n`}</code></pre>\n    <h2>{`Final Terraform code`}</h2>\n    <p>{`All the developed code is in a `}<inlineCode parentName=\"p\">{`main.tf`}</inlineCode>{` file, however to have a more organized project, you can split the Terraform code in different files. This project is simple and small but as your Terraform code grows it is a common pattern to split the code into directories and Terraform Modules. This is something you’ll see in the next section: Getting started with Schematics`}</p>\n    <p>{`This code is also available in the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/IBM/cloud-enterprise-examples/tree/master/iac/01-getting-started\"\n      }}>{`Getting Started`}</a>{` folder of the IaC Pattern Guides GitHub repository.`}</p>\n    <p>{`Here is an example of how to split the terraform code of this “Hello World” example into a logical structure based on the types of resources being managed.`}</p>\n    <h3><inlineCode parentName=\"h3\">{`main.tf`}</inlineCode></h3>\n    <p>{`This file is the first file that Terraform will access, so include here the provider and the instance.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"path=main.tf\",\n        \"path\": \"main.tf\"\n      }}>{`provider \"ibm\" {\n  generation         = 2\n  region             = \"us-south\"\n}\n\nresource \"ibm_is_ssh_key\" \"iac_test_key\" {\n  name       = \"terraform-test-key\"\n  public_key = local.public_key\n}\n\nresource \"ibm_is_instance\" \"iac_test_instance\" {\n  name    = \"terraform-test-instance\"\n  image   = \"r006-14140f94-fcc4-11e9-96e7-a72723715315\"\n  profile = \"cx2-2x4\"\n\n  primary_network_interface {\n    name   = \"eth1\"\n    subnet = ibm_is_subnet.iac_test_subnet.id\n    security_groups = [ ibm_is_security_group.iac_test_security_group.id ]\n  }\n\n  vpc  = ibm_is_vpc.iac_test_vpc.id\n  zone = \"us-south-1\"\n  keys = [ ibm_is_ssh_key.iac_test_key.id ]\n\n  user_data = <<-EOUD\n              #!/bin/bash\n              echo \"Hello World\" > index.html\n              nohup busybox httpd -f -p \\${var.port} &\n              EOUD\n\n  tags = [ \"iac-terraform-test\" ]\n}\n`}</code></pre>\n    <h3><inlineCode parentName=\"h3\">{`variables.tf`}</inlineCode>{` and `}<inlineCode parentName=\"h3\">{`output.tf`}</inlineCode></h3>\n    <p>{`These 2 files will have all the input and output variables:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"path=variables.tf\",\n        \"path\": \"variables.tf\"\n      }}>{`variable \"public_key_file\"  { default = \"~/.ssh/id_rsa.pub\" }\nlocals {\n  public_key    = \"\\${file(pathexpand(var.public_key_file))}\"\n}\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"path=output.tf\",\n        \"path\": \"output.tf\"\n      }}>{`output \"ip_address\" {\n  value = ibm_is_floating_ip.iac_test_floating_ip.address\n}\n\noutput \"entrypoint\" {\n  value = \"http://\\${ibm_is_floating_ip.iac_test_floating_ip.address}:\\${var.port}/\"\n}\n`}</code></pre>\n    <h3><inlineCode parentName=\"h3\">{`network.tf`}</inlineCode></h3>\n    <p>{`All the networking resources will be stored in this file:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"path=network.tf\",\n        \"path\": \"network.tf\"\n      }}>{`resource \"ibm_is_vpc\" \"iac_test_vpc\" {\n  name = \"terraform-test-vpc\"\n}\n\nresource \"ibm_is_subnet\" \"iac_test_subnet\" {\n  name            = \"terraform-test-subnet\"\n  vpc             = ibm_is_vpc.iac_test_vpc.id\n  zone            = \"us-south-1\"\n  ipv4_cidr_block = \"10.240.0.0/24\"\n}\n\nresource \"ibm_is_security_group\" \"iac_test_security_group\" {\n  name = \"terraform-test-sg-public\"\n  vpc = ibm_is_vpc.iac_test_vpc.id\n}\n\nresource \"ibm_is_security_group_rule\" \"iac_test_security_group_rule_all_outbound\" {\n  group = ibm_is_security_group.iac_test_security_group.id\n  direction = \"outbound\"\n}\n\nresource \"ibm_is_security_group_rule\" \"iac_test_security_group_rule_tcp_http\" {\n  group = ibm_is_security_group.iac_test_security_group.id\n  direction = \"inbound\"\n  tcp {\n      port_min = var.port\n      port_max = var.port\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"iac_test_security_group_rule_tcp_ssh\" {\n  group = ibm_is_security_group.iac_test_security_group.id\n  direction = \"inbound\"\n  tcp {\n      port_min = 22\n      port_max = 22\n  }\n}\n\nresource \"ibm_is_floating_ip\" \"iac_test_floating_ip\" {\n  name   = \"terraform-test-ip\"\n  target = ibm_is_instance.iac_test_instance.primary_network_interface.0.id\n}\n`}</code></pre>\n    <h3>{`Other files`}</h3>\n    <p>{`Besides the Terraform files you will need the following files:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`the SSH keys (default are `}<inlineCode parentName=\"li\">{`~/.ssh/id_rsa`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`~/.ssh/id_rsa.pub`}</inlineCode>{`).`}</li>\n      <li parentName=\"ul\">{`the `}<inlineCode parentName=\"li\">{`terraform_key.json`}</inlineCode>{` created to store the IBM Cloud API Key`}</li>\n      <li parentName=\"ul\">{`the `}<inlineCode parentName=\"li\">{`terraform.tfstate`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`terraform.tfstate.backup`}</inlineCode>{` with the Terraform State`}</li>\n    </ul>\n    <p>{`Optionally you can also have a `}<inlineCode parentName=\"p\">{`terraform.tfvars`}</inlineCode>{` to set values to the input variables, like so:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-hcl\",\n        \"metastring\": \"path=terraform.tfvars\",\n        \"path\": \"terraform.tfvars\"\n      }}>{`port = 8081\n`}</code></pre>\n    <p>{`All these files contain or may contain sensitive information and should not be stored in the GitHub repository. Make sure there is a `}<inlineCode parentName=\"p\">{`.gitignore`}</inlineCode>{` file with the following content:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-git\",\n        \"metastring\": \"path=.gitignore\",\n        \"path\": \".gitignore\"\n      }}>{`terraform_key*.json\n.terraform\n*.tfstate*\nid_rsa*\n*.tfvars*\n`}</code></pre>\n    <h2>{`Clean up`}</h2>\n    <p>{`After spending a few minutes admiring your masterpiece and showing it to your friends, you can destroy everything to save money with the command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`terraform destroy\n`}</code></pre>\n    <p>{`After the command completes, if you check the `}<inlineCode parentName=\"p\">{`terraform.tfstate`}</inlineCode>{` file, it’s almost empty, showing no information about the resources.`}</p>\n    <h2>{`Reference`}</h2>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://cloud.ibm.com/docs/terraform?topic=terraform-getting-started\"\n        }}>{`IBM Cloud / Terraform`}</a>{` (`}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/ibm-cloud-docs/terraform\"\n        }}>{`Source`}</a>{`)`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://cloud.ibm.com/docs/terraform?topic=terraform-setup_cli\"\n        }}>{`Setting up the CLI for Terraform`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://cloud.ibm.com/docs/terraform?topic=terraform-quick-links\"\n        }}>{`IBM Cloud provider for Terraform`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://cloud.ibm.com/docs/terraform?topic=terraform-provider-reference#required-parameters\"\n        }}><inlineCode parentName=\"a\">{`provider`}</inlineCode>{` block configuration`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://cloud.ibm.com/docs/terraform?topic=terraform-vpc-gen2-resources\"\n        }}>{`VPC Infrastructure resources (Gen 2)`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://cloud.ibm.com/docs/vpc-on-classic-vsi?topic=vpc-on-classic-vsi-user-data\"\n        }}>{`User data`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://github.com/IBM-Cloud/terraform-provider-ibm\"\n        }}>{`Terraform IBM Cloud provider`}</a></li>\n    </ul>\n    {\n      /*\n      - Terraform IBM Cloud provider - [website](https://github.com/IBM-Cloud/terraform-provider-ibm/blob/master/website/docs/index.html.markdown) (possible old source of *IBM Cloud / Terraform*)\n      - Terraform IBM Cloud provider - [examples](https://github.com/IBM-Cloud/terraform-provider-ibm/tree/master/examples)\n      - Terraform IBM Cloud provider - [docs](https://ibm-cloud.github.io/tf-ibm-docs/) (old version of *IBM Cloud / Terraform*)\n      - IBM Cloud - Create a [Virtual Private Cloud](https://cloud.ibm.com/vpc/overview) (VPC)\n      - IBM Cloud - Docs for [Virtual Private Cloud](https://cloud.ibm.com/docs/vpc?topic=vpc-getting-started) (VPC)\n      */\n    }\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}