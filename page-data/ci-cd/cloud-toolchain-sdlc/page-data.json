{"componentChunkName":"component---src-pages-ci-cd-cloud-toolchain-sdlc-index-mdx","path":"/ci-cd/cloud-toolchain-sdlc/","result":{"pageContext":{"frontmatter":{"title":"IBM Cloud Toolchain Testing/SDLC","description":"IBM Cloud Toolchain Testing/SDLC","keywords":"ibm cloud cicd"},"relativePagePath":"/ci-cd/cloud-toolchain-sdlc/index.mdx","titleType":"page","MdxNode":{"id":"0ff4bf8b-f19a-56e0-be26-7a4b8ae4cf21","children":[],"parent":"ab9ab34e-bedb-5bbb-a83f-db89ad0ce796","internal":{"content":"---\ntitle: IBM Cloud Toolchain Testing/SDLC\ndescription: IBM Cloud Toolchain Testing/SDLC\nkeywords: 'ibm cloud cicd'\n---\n\n<PageDescription>\n\nIBM Cloud Toolchain Testing/SDLC\n\n</PageDescription>\n\n<AnchorLinks small>\n  <AnchorLink>After Initial Setup...</AnchorLink>\n  <AnchorLink>Link SonarQube Instance to Toolchain</AnchorLink>\n  <AnchorLink>Create SonarQube Scan Stage</AnchorLink>\n  <AnchorLink>View Scan Results</AnchorLink>\n  <AnchorLink>SDLC</AnchorLink>\n  <AnchorLink>IBM Devops Insights</AnchorLink>\n</AnchorLinks>\n\n## After Initial Setup...\n\nAfter completing the steps on the [Cloud Toolchain Setup Page](../cloud-toolchain-setup) we have a pipeline with 3 stages: **Build**, **Containerize**, and **Deploy**. \n\n![pipeline stages](../../../images/cicd-toolchain-stages.png)  \n\nWe can add additional stages to add more steps for testing such as executing static anaylsis on our code. \nIn the following instructions, we will create a new stage to add a Sonar scan to find common bugs and code smells in our code. \nWe will also link an instance of SonarQube in our toolchain, and upload the results of the scans to SonarQube for easier anaylsis.\n\nThe following instructions assume you have a SonarQube instance installed somewhere that is accessible by your pipeline.\n\n## Link SonarQube Instance to Toolchain\n\n- Navigate to the homepage of your toolchain by selecting **Devops** in the upper lefthand menu of IBM Cloud and select the name of your toolchain.\n\n\n![pipeline homepage](../../../images/cicd-toolchain-homepage.png)  \n\n- Click the **Add tool** button \n- Filter for **SonarQube** and select the matching tool integration.\n\n![pipeline add tool](../../../images/cicd-toolchain-addsonartool.png)  \n\n- Configure the SonarQube integration with **Name**, **SonarQube URL**, **SonarQube user name** and **SonarQube password or authentication token**\n\n![pipeline add tool](../../../images/cicd-toolchain-sonarconfig.png)  \n\n- Click **Create Integration**\n\nNow you should see a **SonarQube** box under **Learn** on the homepage of your toolchain. \nClicking this box will redirect you to your SonarQube instance. \nBy adding the tool integration, we created environment variables for the SonarQube URL, user and password information that are available across the pipeline.\nWe will use these variables in the next step when we create a stage to execute code static anaylsis.\n\n![pipeline homepage](../../../images/cicd-toolchain-homeaftersonar.png)  \n\n## Create SonarQube Scan Stage\n\n- From the toolchain homepage, click on **Delivery Pipeline**\n- Click **Add Stage** button\n\n![pipeline add stage](../../../images/cicd-toolchain-addstage.png)  \n\n- Name your stage **SonarQube Scan**. Leave the default values under the **Input** tab. \n\n![pipeline add stage](../../../images/cicd-toolchain-input.png)  \n\n- Select the **Jobs** tab.\n- Click **Add Job** and choose **Build** as the type\n\n![pipeline configure stage](../../../images/cicd-toolchain-addjob2.png)  \n\n- Select **Maven (Artifactory, Nexus, or SonarQube)** as the **Builder Type**\n\n![pipeline configure stage](../../../images/cicd-toolchain-buildertype.png)  \n\n- In the **Build command** text field, remove all of the code and replace with the following `mvn` command\n\n```bash\nmvn -B -e package sonar:sonar -Dsonar.host.url=$SONAR_SERVER_URL -Dsonar.scm.disabled=true\n```\n\n<InlineNotification>\nIn this command we refrence the \"$SONAR_SERVER_URL\" environment variable that is available after we added the SonarQube tool integration\n</InlineNotification>\n\n- Click **Save**\n\n- Back on the pipeline screen, drag and drop the **SonarQube Scan** stage so that it follows the **Build** stage.\n\n![pipeline configure stage](../../../images/cicd-toolchain-withsonar.png)   \n\n\n\n## View Scan Results\n\n- To manually trigger your newly create stage to run, click on the play button icon next to the stage name. You can also trigger it automatically by making a code change.\n\n![pipeline configure stage](../../../images/cicd-toolchain-sonarrunning.png)   \n\n- Click **View logs and history** to check the progress. Once the job finishes successfully, you will see a link printed at the bottom of the logs.\n\n![pipeline configure stage](../../../images/cicd-toolchain-sonarlogs.png)  \n\n- Click the link to be redirected to the SonarQube instance to see details for the report.\n\n![pipeline configure stage](../../../images/cicd-toolchain-sonarreport.png)  \n\nThis app is really simple and passes the SonarQube scan easily.\nIn the event of a code change that fails static code anaylsis, the scan would return an error and stop the pipeline from proceeding.\nThis follows best practices for implementing quality gates in your pipeline- making sure that code meets certain quality levels before continuing to a deployment stage.\nTo configure a stage in the pipeline to \"fail fast\", select the checkbox on the stage configuration screen.\n\n![pipeline fail fast](../../../images/cicd-pipeline-failfast.png)  \n\n\n## SDLC   \n\nThe IBM Cloud toolchain provides flexible mechanisms through Jobs and Stages to easily handle any type of testing such as running unit tests, \nfunctional tests, or to integrate with testing tools such as SonarQuber. \nPipeline Stages should be applied to any step within the SDLC model, whether it is building, testing or deployment related.\n\nThe pipeline also provides you with tracability. \nEach execution of a stage records a trigger source and, at the start of the pipeline, a specific code commit, so that you can trace each pipeline execution back to a single change in the code.\n\n\n## IBM Devops Insights\n\nOne testing tool that is provided native on IBM Cloud to help multiple testing scenarios is Devops Insights.\nIBM Cloud DevOps Insights is a tool that aggregates code, test, build, and deployment data to provide visibility of quality for all of your teams.\nWith DevOps Insights, you can maintain and improve the quality of your code in IBM Cloud. \nYou can monitor your deployments to identify risks before they are released, analyze development changes for error probability, and improve the interactions of your team.\n\nFollow [this tutorial](https://cloud.ibm.com/docs/ContinuousDelivery?topic=ContinuousDelivery-di_working) for a detailed step by step tutorial to add devops insights into your pipeline.\n\n\n","type":"Mdx","contentDigest":"00b3fbfa474d8fd6fcf36187e3e9fe67","counter":727,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"IBM Cloud Toolchain Testing/SDLC","description":"IBM Cloud Toolchain Testing/SDLC","keywords":"ibm cloud cicd"},"exports":{},"rawBody":"---\ntitle: IBM Cloud Toolchain Testing/SDLC\ndescription: IBM Cloud Toolchain Testing/SDLC\nkeywords: 'ibm cloud cicd'\n---\n\n<PageDescription>\n\nIBM Cloud Toolchain Testing/SDLC\n\n</PageDescription>\n\n<AnchorLinks small>\n  <AnchorLink>After Initial Setup...</AnchorLink>\n  <AnchorLink>Link SonarQube Instance to Toolchain</AnchorLink>\n  <AnchorLink>Create SonarQube Scan Stage</AnchorLink>\n  <AnchorLink>View Scan Results</AnchorLink>\n  <AnchorLink>SDLC</AnchorLink>\n  <AnchorLink>IBM Devops Insights</AnchorLink>\n</AnchorLinks>\n\n## After Initial Setup...\n\nAfter completing the steps on the [Cloud Toolchain Setup Page](../cloud-toolchain-setup) we have a pipeline with 3 stages: **Build**, **Containerize**, and **Deploy**. \n\n![pipeline stages](../../../images/cicd-toolchain-stages.png)  \n\nWe can add additional stages to add more steps for testing such as executing static anaylsis on our code. \nIn the following instructions, we will create a new stage to add a Sonar scan to find common bugs and code smells in our code. \nWe will also link an instance of SonarQube in our toolchain, and upload the results of the scans to SonarQube for easier anaylsis.\n\nThe following instructions assume you have a SonarQube instance installed somewhere that is accessible by your pipeline.\n\n## Link SonarQube Instance to Toolchain\n\n- Navigate to the homepage of your toolchain by selecting **Devops** in the upper lefthand menu of IBM Cloud and select the name of your toolchain.\n\n\n![pipeline homepage](../../../images/cicd-toolchain-homepage.png)  \n\n- Click the **Add tool** button \n- Filter for **SonarQube** and select the matching tool integration.\n\n![pipeline add tool](../../../images/cicd-toolchain-addsonartool.png)  \n\n- Configure the SonarQube integration with **Name**, **SonarQube URL**, **SonarQube user name** and **SonarQube password or authentication token**\n\n![pipeline add tool](../../../images/cicd-toolchain-sonarconfig.png)  \n\n- Click **Create Integration**\n\nNow you should see a **SonarQube** box under **Learn** on the homepage of your toolchain. \nClicking this box will redirect you to your SonarQube instance. \nBy adding the tool integration, we created environment variables for the SonarQube URL, user and password information that are available across the pipeline.\nWe will use these variables in the next step when we create a stage to execute code static anaylsis.\n\n![pipeline homepage](../../../images/cicd-toolchain-homeaftersonar.png)  \n\n## Create SonarQube Scan Stage\n\n- From the toolchain homepage, click on **Delivery Pipeline**\n- Click **Add Stage** button\n\n![pipeline add stage](../../../images/cicd-toolchain-addstage.png)  \n\n- Name your stage **SonarQube Scan**. Leave the default values under the **Input** tab. \n\n![pipeline add stage](../../../images/cicd-toolchain-input.png)  \n\n- Select the **Jobs** tab.\n- Click **Add Job** and choose **Build** as the type\n\n![pipeline configure stage](../../../images/cicd-toolchain-addjob2.png)  \n\n- Select **Maven (Artifactory, Nexus, or SonarQube)** as the **Builder Type**\n\n![pipeline configure stage](../../../images/cicd-toolchain-buildertype.png)  \n\n- In the **Build command** text field, remove all of the code and replace with the following `mvn` command\n\n```bash\nmvn -B -e package sonar:sonar -Dsonar.host.url=$SONAR_SERVER_URL -Dsonar.scm.disabled=true\n```\n\n<InlineNotification>\nIn this command we refrence the \"$SONAR_SERVER_URL\" environment variable that is available after we added the SonarQube tool integration\n</InlineNotification>\n\n- Click **Save**\n\n- Back on the pipeline screen, drag and drop the **SonarQube Scan** stage so that it follows the **Build** stage.\n\n![pipeline configure stage](../../../images/cicd-toolchain-withsonar.png)   \n\n\n\n## View Scan Results\n\n- To manually trigger your newly create stage to run, click on the play button icon next to the stage name. You can also trigger it automatically by making a code change.\n\n![pipeline configure stage](../../../images/cicd-toolchain-sonarrunning.png)   \n\n- Click **View logs and history** to check the progress. Once the job finishes successfully, you will see a link printed at the bottom of the logs.\n\n![pipeline configure stage](../../../images/cicd-toolchain-sonarlogs.png)  \n\n- Click the link to be redirected to the SonarQube instance to see details for the report.\n\n![pipeline configure stage](../../../images/cicd-toolchain-sonarreport.png)  \n\nThis app is really simple and passes the SonarQube scan easily.\nIn the event of a code change that fails static code anaylsis, the scan would return an error and stop the pipeline from proceeding.\nThis follows best practices for implementing quality gates in your pipeline- making sure that code meets certain quality levels before continuing to a deployment stage.\nTo configure a stage in the pipeline to \"fail fast\", select the checkbox on the stage configuration screen.\n\n![pipeline fail fast](../../../images/cicd-pipeline-failfast.png)  \n\n\n## SDLC   \n\nThe IBM Cloud toolchain provides flexible mechanisms through Jobs and Stages to easily handle any type of testing such as running unit tests, \nfunctional tests, or to integrate with testing tools such as SonarQuber. \nPipeline Stages should be applied to any step within the SDLC model, whether it is building, testing or deployment related.\n\nThe pipeline also provides you with tracability. \nEach execution of a stage records a trigger source and, at the start of the pipeline, a specific code commit, so that you can trace each pipeline execution back to a single change in the code.\n\n\n## IBM Devops Insights\n\nOne testing tool that is provided native on IBM Cloud to help multiple testing scenarios is Devops Insights.\nIBM Cloud DevOps Insights is a tool that aggregates code, test, build, and deployment data to provide visibility of quality for all of your teams.\nWith DevOps Insights, you can maintain and improve the quality of your code in IBM Cloud. \nYou can monitor your deployments to identify risks before they are released, analyze development changes for error probability, and improve the interactions of your team.\n\nFollow [this tutorial](https://cloud.ibm.com/docs/ContinuousDelivery?topic=ContinuousDelivery-di_working) for a detailed step by step tutorial to add devops insights into your pipeline.\n\n\n","fileAbsolutePath":"/Users/isaias/Documents/Projects/Developer_Advocate_Group/CODE_PATTERNS/ibm-asean-enterprise-cloud-patterns/src/pages/ci-cd/cloud-toolchain-sdlc/index.mdx"}}}}